var Ti=Object.defineProperty;var Pi=(n,t,e)=>t in n?Ti(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var be=(n,t,e)=>Pi(n,typeof t!="symbol"?t+"":t,e);/* empty css            */var $i=Object.defineProperty,Ni=(n,t,e)=>t in n?$i(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ie=(n,t,e)=>Ni(n,typeof t!="symbol"?t+"":t,e);document.addEventListener("alpine:init",()=>{window.Alpine.store("editOnClickValidation",{pending:[],set(n,t){this.pending=this.pending.filter(e=>e.value!==n),this.pending.push({value:n,textContent:t})},has(n){return this.pending.some(t=>t.value===n)},get(n){return this.pending.find(t=>t.value===n)},notContains(n){return this.pending.length>0&&!this.has(n)},clear(){this.pending=[]},getTextContent(n){const t=this.pending.find(e=>e.value===n);return t?t.textContent:null}}),window.editOnClickValidation=window.Alpine.store("editOnClickValidation")});document.addEventListener("alpine:init",()=>{window.Alpine.store("pgBulkActions",{selected:[],init(){window.addEventListener("pgBulkActions::addMore",n=>{const t=n.__livewire.params[0];typeof this.selected[t.tableName]>"u"&&(this.selected[t.tableName]=[]),this.selected[t.tableName].push(t.value)}),window.addEventListener("pgBulkActions::clear",n=>{this.clear(n.detail)}),window.addEventListener("pgBulkActions::clearAll",()=>{this.clearAll()})},add(n,t){if(typeof this.selected[t]>"u"&&(this.selected[t]=[]),!this.selected[t].includes(n)){this.selected[t].push(n);return}this.remove(n,t)},remove(n,t){const e=this.selected[t].indexOf(n);e>-1&&this.selected[t].splice(e,1)},get(n){return this.selected[n]??""},count(n){return typeof this.selected[n]>"u"?0:this.selected[n].length},clear(n){this.selected[n]=[]},clearAll(){this.selected=[]}}),window.pgBulkActions=window.Alpine.store("pgBulkActions")});const Hi=n=>({field:n.field??null,tableName:n.tableName??null,enabled:n.enabled??!1,id:n.id,trueValue:n.trueValue,falseValue:n.falseValue,toggle:n.toggle,save(){this.toggle=this.toggle===0?1:0,this.$wire.dispatch("pg:toggleable-"+this.tableName,{id:this.id,field:this.field,value:this.toggle})}}),ji=(n,t,e)=>{const i=n[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},Ri=n=>({dataField:n.dataField,tableName:n.tableName,label:n.label??null,locale:n.locale??{locale:"default",dateFormat:"Y-m-d H:i",time_24hr:!1,enableTime:!0},onlyFuture:n.onlyFuture??!1,noWeekEnds:n.noWeekEnds??!1,customConfig:n.customConfig??null,type:n.type,element:null,selectedDates:null,async init(){typeof flatpickr>"u"&&(console.log("%c%s","color: #f59e0c; font-size: 1.2em; font-weight: bold; line-height: 1.5"," PowerGrid"),console.error("%c%s","font-size: 1em; line-height: 1.5",`
Failed to mount filter: Filter::datetime('${this.dataField}') on table ['${this.tableName}']

• Install flatpickr: npm install flatpickr

• Add 'import flatpickr from "flatpickr"' in resources/js/app.js file
  `)),window.addEventListener(`pg:clear_flatpickr::${this.tableName}:${this.dataField}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()}),window.addEventListener(`pg:clear_all_flatpickr::${this.tableName}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()});try{const e=await ji(Object.assign({}),`./flatpickr/dist/l10n/${this.locale.locale}.js`,5);flatpickr.localize(e.default||e)}catch{}const t=this.getOptions();this.$refs.rangeInput&&typeof flatpickr<"u"&&(this.element=flatpickr(this.$refs.rangeInput,t),this.selectedDates=this.$wire.get(`filters.${this.type}.${this.dataField}.formatted`),this.element.setDate(this.selectedDates))},getOptions(){const t={mode:"range",defaultHour:0,...this.locale,...this.customConfig};return this.onlyFuture&&(t.minDate="today"),this.noWeekEnds&&(t.disable=[function(e){return e.getDay()===0||e.getDay()===6}]),t.onClose=(e,i,r)=>{e=e.map(o=>this.element.formatDate(o,"Y-m-d")),e.length>0&&this.selectedDates!==i&&Livewire.dispatch("pg:datePicker-"+this.tableName,{selectedDates:e,dateStr:i,timezone:this.customConfig.timezone??new Date().toString().match(/([-\+][0-9]+)\s/)[1],type:this.type,field:this.dataField,label:this.label,dateFormat:this.locale.dateFormat??"Y-m-d H:i"})},t}}),Vi=n=>({theme:n.theme,id:n.id??null,dataField:n.dataField??null,content:n.content,fallback:n.fallback,inputClass:n.inputClass,saveOnMouseOut:n.saveOnMouseOut,oldContent:null,editable:!1,hash:null,hashError:!0,showEditable:!1,editableInput:"",init(){this.content.length===0&&this.fallback&&(this.content=this.htmlSpecialChars(this.fallback)),this.hash=this.dataField+"-"+this.id,window.addEventListener("toggle-"+this.hash,()=>{this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.click(),this.observe(()=>document.getElementById("editable-"+this.hash),e=>{setTimeout(()=>this.setFocusToEnd(e),100)})})}),this.$watch("editable",t=>{if(t){let e=!1;if(this.showEditable=!1,this.content=this.htmlSpecialChars(this.content),this.oldContent=this.content,this.hashError=this.store().notContains(this.hash),this.observe(()=>document.getElementById("editable-"+this.hash),i=>{setTimeout(()=>{this.setFocusToEnd(i),this.store().getTextContent(this.hash)&&(i.textContent=this.store().getTextContent(this.hash))},30)}),this.hashError){const i=this.store().get(this.hash),r=document.getElementById("clickable-"+i);r&&r.click()}e=!0,this.editableInput=`
                <div
                    x-ref="editable"
                    x-text="content"
                    value="${this.content}"
                    placeholder="${this.content}"
                    contenteditable
                    class="pg-single-line ${this.inputClass}"
                    ${this.saveOnMouseOut?'x-on:mousedown.outside="save()"':""}
                    x-on:keydown.enter="save()"
                    id="${"editable-"+this.dataField+"-"+this.id}"
                    x-on:keydown.esc="cancel"
                >
                </div>`,this.$nextTick(()=>setTimeout(()=>{this.showEditable=e,this.focus()},150))}}),this.content=this.htmlSpecialChars(this.content)},store(){return window.editOnClickValidation},save(){this.store().clear(),this.store().set(this.hash,this.$el.textContent),this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.textContent=this.$el.textContent}),window.addEventListener("pg:editable-close-"+this.id,()=>{this.store().clear(),this.editable=!1,this.showEditable=!1}),this.store().has(this.hash)||this.store().set(this.hash,this.$el.textContent),this.$wire.dispatch("pg:editable-"+this.$wire.tableName,{id:this.id,value:this.$el.textContent,field:this.dataField}),this.oldContent=this.store().getTextContent(this.hash),this.$nextTick(()=>{this.focus(),this.$el.setAttribute("value","")}),this.content=this.htmlSpecialChars(this.$el.textContent)},focus(){this.setFocusToEnd(this.$el)},cancel(){this.store().clear(),this.$refs.editable.textContent=this.oldContent,this.content=this.oldContent,this.editable=!1,this.showEditable=!1,this.$refs.error&&(this.$refs.error.innerHTML="")},htmlSpecialChars(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent},observe(t,e){new MutationObserver((i,r)=>{for(let o of i)if(o.type==="childList"){const s=t();if(s){e(s),r.disconnect();break}}}).observe(document.body,{childList:!0,subtree:!0})},setFocusToEnd(t){if(!t)return;const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),i.collapse(!1),e.removeAllRanges(),e.addRange(i),t.focus()}});function Yi(n){n.querySelectorAll("tbody tr td").forEach(t=>{t.classList.remove("hidden")}),n.querySelectorAll("thead tr th").forEach(t=>{t.classList.remove("hidden")})}function Bi(n){let t=0;const e=n.querySelectorAll("table thead tr:nth-child(1) th[fixed]"),i=Ht(n);return e.forEach(r=>{t+=Ht(r)}),i-t}function qi(n,t){const e=[].slice.call(n.querySelectorAll("table thead tr:nth-child(1) th")),i=Array.from(e).filter(d=>getComputedStyle(d).display!=="none"),r=[].slice.call(i).sort(function(d,u){const h=d.getAttribute("sort_order")??999,p=u.getAttribute("sort_order")??999;return h-p});let o=0,s=!0;const l=[];return r.forEach(d=>{const u=Ht(d);d.getAttribute("fixed")===null&&(s&&o<=t&&o+u<=t?o+=u:(l.push(i.indexOf(d)+1),s=!1))}),l}function zi(n,t){for(const e of t)n.querySelectorAll(`tbody:not(tbody[expand]) tr td:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")}),n.querySelectorAll(`thead tr th:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")})}function Ki(n,t){var e,i;if(n.querySelectorAll("table tbody[expand] tr td div").length){for(const r of n.querySelectorAll("table tbody[expand] tr td div"))r.innerHTML="";if(t.length)for(const r of t){const o=n.querySelectorAll("table tbody:not(tbody[expand])");for(const s of o){const l=(e=s.nextElementSibling)==null?void 0:e.querySelector("tr td div");if(!l)continue;let d=n.querySelector(`table thead tr th:nth-child(${r}) span[data-value]`).textContent;const u=(i=s.querySelector(`tr:last-child td:nth-child(${r})`))==null?void 0:i.innerHTML;d.length&&(d+=":"),l.querySelector(`div[data-expand-item-${r}]`)||(l.innerHTML+=`<div class="responsive-row-expand-item-container" data-expand-item-${r}>
                    <span class="font-bold responsive-row-expand-item-name">${d}</span>
                    <span class="responsive-row-expand-item-value">${u}</span>
                </div>`)}}}}function Ht(n){return parseFloat(n.getBoundingClientRect().width.toFixed(2))}function Wi(n){Yi(n);const t=Bi(n),e=qi(n,t);Ki(n,e),zi(n,e)}const Ui=()=>({running:!1,expanded:null,element:null,hasHiddenElements:!1,size:0,toggleExpanded(n){this.expanded=this.expanded==n?null:n},init(){this.$nextTick(()=>{this.handleResize(),this.observeElement(),window.addEventListener("pg-livewire-request-finished",()=>{setTimeout(()=>this.handleResize(),5)})})},handleResize(){var n;const t=this.$el;Wi(t),this.hasHiddenElements=(n=t.querySelector("table tbody[expand] tr td div"))==null?void 0:n.innerHTML,this.hasHiddenElements||(this.expanded=null)},observeElement(){new ResizeObserver(n=>{n.forEach(t=>{if(t.contentRect.width>0){if(this.size===this.$el.getBoundingClientRect().width)return;this.size=this.$el.getBoundingClientRect().width,this.handleResize()}})}).observe(this.$el)}}),Qi=(n,t,e)=>{Livewire.dispatch(`${n}-${t.tableName}`,{label:t.label,field:t.dataField,values:e})},Rn=(n,t)=>{Qi("pg:multiSelect",n,t)};function bt(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class Gi{constructor(){this._events={}}on(t,e){bt(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}bt(t,r=>{if(i===1){delete this._events[r];return}const o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;bt(t,r=>{const o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}}function Ji(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const dt=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":Zi(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Vn=n=>{if(!Xi(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},Yn=n=>{let t=Array.from(n);return dt(t)},Xi=n=>new Set(n).size!==n.length,$e=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Zi=n=>n.reduce((t,e)=>Math.max(t,er(e)),0),er=n=>Array.from(n).length,Bn=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return Bn(e).forEach(function(i){let r=i.slice(0);r[0]=n.charAt(0)+r[0],t.push(r),r=i.slice(0),r.unshift(n.charAt(0)),t.push(r)}),t},tr=[[0,65535]],nr="[̀-ͯ·ʾʼ]";let it,qn;const ir=3,Yt={},tn={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in tn){let t=tn[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Yt[i]=n}}const rr=new RegExp(Object.keys(Yt).join("|")+"|"+nr,"gu"),sr=n=>{it===void 0&&(it=cr(tr))},nn=(n,t="NFKD")=>n.normalize(t),rt=n=>Array.from(n).reduce((t,e)=>t+or(e),""),or=n=>(n=nn(n).toLowerCase().replace(rr,t=>Yt[t]||""),nn(n,"NFC"));function*ar(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=rt(r);o!=r.toLowerCase()&&(o.length>ir||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}const lr=n=>{const t={},e=(i,r)=>{const o=t[i]||new Set,s=new RegExp("^"+Yn(o)+"$","iu");r.match(s)||(o.add($e(r)),t[i]=o)};for(let i of ar(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},cr=n=>{const t=lr(n),e={};let i=[];for(let o in t){let s=t[o];s&&(e[o]=Yn(s)),o.length>1&&i.push($e(o))}i.sort((o,s)=>s.length-o.length);const r=dt(i);return qn=new RegExp("^"+r,"u"),e},dr=(n,t=1)=>{let e=0;return n=n.map(i=>(it[i]&&(e+=i.length),it[i]||i)),e>=t?Vn(n):""},ur=(n,t=1)=>(t=Math.max(t,n.length-1),dt(Bn(n).map(e=>dr(e,t)))),rn=(n,t=!0)=>{let e=n.length>1?1:0;return dt(n.map(i=>{let r=[];const o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(ur(i.substrs[s]||"",e));return Vn(r)}))},fr=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=o=>{for(const s of i){if(s.start===o.start&&s.substr===o.substr)return!1;if(!(o.length==1||s.length==1)&&(o.start<s.start&&o.end>s.start||s.start<o.start&&s.end>o.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class st{constructor(){Ie(this,"parts"),Ie(this,"substrs"),Ie(this,"start"),Ie(this,"end"),this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new st,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(const d of r)i.add(d);let s=e.substr.substring(0,t-o.start),l=s.length;return i.add({start:o.start,end:o.start+l,length:l,substr:s}),i}}const pr=n=>{sr(),n=rt(n);let t="",e=[new st];for(let i=0;i<n.length;i++){let r=n.substring(i).match(qn);const o=n.substring(i,i+1),s=r?r[0]:null;let l=[],d=new Set;for(const u of e){const h=u.last();if(!h||h.length==1||h.end<=i)if(s){const p=s.length;u.add({start:i,end:i+p,length:p,substr:s}),d.add("1")}else u.add({start:i,end:i+1,length:1,substr:o}),d.add("2");else if(s){let p=u.clone(i,h);const m=s.length;p.add({start:i,end:i+m,length:m,substr:s}),l.push(p)}else d.add("3")}if(l.length>0){l=l.sort((u,h)=>u.length()-h.length());for(let u of l)fr(u,e)||e.push(u);continue}if(i>0&&d.size==1&&!d.has("3")){t+=rn(e,!1);let u=new st;const h=e[0];h&&u.add(h.last()),e=[u]}}return t+=rn(e,!0),t},hr=(n,t)=>{if(n)return n[t]},gr=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},wt=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},Ct=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},ze=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},mr=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=rt(n+"").toLowerCase(),t=rt(t+"").toLowerCase(),n>t?1:t>n?-1:0);class vr{constructor(t,e){Ie(this,"items"),Ie(this,"settings"),this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map($e).join("|")+"):(.*)$")),o.forEach(l=>{let d,u=null,h=null;s&&(d=l.match(s))&&(u=d[1],l=d[2]),l.length>0&&(this.settings.diacritics?h=pr(l)||null:h=$e(l),h&&e&&(h="\\b"+h)),r.push({string:l,regex:h?new RegExp(h,"iu"):null,field:u})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,o=t.weights,s=r.length,l=t.getAttrFn;if(!s)return function(){return 1};const d=(function(){return s===1?function(u,h){const p=r[0].field;return wt(l(h,p),u,o[p]||1)}:function(u,h){var p=0;if(u.field){const m=l(h,u.field);!u.regex&&m?p+=1/s:p+=wt(m,u,1)}else ze(o,(m,A)=>{p+=wt(l(h,A),u,m)});return p/s}})();return i===1?function(u){return d(e[0],u)}:t.options.conjunction==="and"?function(u){var h,p=0;for(let m of e){if(h=d(m,u),h<=0)return 0;p+=h}return p/i}:function(u){var h=0;return ze(e,p=>{h+=d(p,u)}),h/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);const l=function(d,u){return d==="$score"?u.score:t.getAttrFn(r.items[u.id],d)};if(s)for(let d of s)(t.query||d.field!=="$score")&&i.push(d);if(t.query){e=!0;for(let d of i)if(d.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(d=>d.field!=="$score");return i.length?function(d,u){var h,p;for(let m of i)if(p=m.field,h=(m.direction==="desc"?-1:1)*mr(l(p,d),l(p,u)),h)return h;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(Ct(r,"sort"),Ct(r,"sort_empty"),r.fields){Ct(r,"fields");const o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?gr:hr}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;const s=e.score||i._getScoreFunction(o);t.length?ze(i.items,(d,u)=>{r=s(d),(e.filter===!1||r>0)&&o.items.push({score:r,id:u})}):ze(i.items,(d,u)=>{o.items.push({score:1,id:u})});const l=i._getSortFunction(o);return l&&o.items.sort(l),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}}const de=n=>typeof n>"u"||n===null?null:tt(n),tt=n=>typeof n=="boolean"?n?"1":"0":n+"",Ot=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),yr=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),br=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},sn=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},wr=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),q=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},G=(n,t,e,i)=>{n.addEventListener(t,e,i)},we=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},_t=(n,t)=>n.getAttribute("id")||(n.setAttribute("id",t),t),on=n=>n.replace(/[\\"']/g,"\\$&"),Ce=(n,t)=>{t&&n.append(t)},K=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},pe=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(zn(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},zn=n=>typeof n=="string"&&n.indexOf("<")>-1,Cr=n=>n.replace(/['"\\]/g,"\\$&"),Dt=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Ke=(n,t)=>{Object.assign(n.style,t)},se=(n,...t)=>{var e=Kn(t);n=Wn(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},me=(n,...t)=>{var e=Kn(t);n=Wn(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Kn=n=>{var t=[];return K(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Wn=n=>(Array.isArray(n)||(n=[n]),n),At=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},an=(n,t=0)=>t>0?n[n.length-1]:n[0],Or=n=>Object.keys(n).length===0,ln=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},j=(n,t)=>{K(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},jt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},_r=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var l=document.createElement("span");l.className="highlight";var d=o.splitText(s.index);d.splitText(s[0].length);var u=d.cloneNode(!0);return l.appendChild(u),jt(d,l),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},Dr=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},Ar=65,Sr=13,xr=27,Er=37,Ir=38,kr=39,Mr=40,cn=8,Fr=46,dn=9,Lr=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),We=Lr?"metaKey":"ctrlKey",un={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function fn(n,t){var e=Object.assign({},un,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,l=e.optgroupField,d=e.optgroupLabelField,u=e.optgroupValueField,h=n.tagName.toLowerCase(),p=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!p&&!e.allowEmptyOption){let b=n.querySelector('option[value=""]');b&&(p=b.textContent)}var m={placeholder:p,options:[],optgroups:[],items:[],maxItems:null},A=()=>{var b,k=m.options,S={},y=1;let M=0;var N=O=>{var D=Object.assign({},O.dataset),C=i&&D[i];return typeof C=="string"&&C.length&&(D=Object.assign(D,JSON.parse(C))),D},ie=(O,D)=>{var C=de(O.value);if(C!=null&&!(!C&&!e.allowEmptyOption)){if(S.hasOwnProperty(C)){if(D){var T=S[C][l];T?Array.isArray(T)?T.push(D):S[C][l]=[T,D]:S[C][l]=D}}else{var E=N(O);E[r]=E[r]||O.textContent,E[o]=E[o]||C,E[s]=E[s]||O.disabled,E[l]=E[l]||D,E.$option=O,E.$order=E.$order||++M,S[C]=E,k.push(E)}O.selected&&m.items.push(C)}},B=O=>{var D,C;C=N(O),C[d]=C[d]||O.getAttribute("label")||"",C[u]=C[u]||y++,C[s]=C[s]||O.disabled,C.$order=C.$order||++M,m.optgroups.push(C),D=C[u],K(O.children,T=>{ie(T,D)})};m.maxItems=n.hasAttribute("multiple")?null:1,K(n.children,O=>{b=O.tagName.toLowerCase(),b==="optgroup"?B(O):b==="option"&&ie(O)})},g=()=>{const b=n.getAttribute(i);if(b)m.options=JSON.parse(b),K(m.options,S=>{m.items.push(S[o])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const S=k.split(e.delimiter);K(S,y=>{const M={};M[r]=y,M[o]=y,m.options.push(M)}),m.items=S}};return h==="select"?A():g(),Object.assign({},un,m,t)}var pn=0;class Z extends Ji(Gi){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,pn++;var i,r=pe(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");const s=fn(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=_t(r,"tomselect-"+pn),this.isRequired=r.required,this.sifter=new vr(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var l=s.createFilter;typeof l!="function"&&(typeof l=="string"&&(l=new RegExp(l)),l instanceof RegExp?s.createFilter=k=>l.test(k):s.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();const d=pe("<div>"),u=pe("<div>"),h=this._render("dropdown"),p=pe('<div role="listbox" tabindex="-1">'),m=this.input.getAttribute("class")||"",A=s.mode;var g;if(se(d,s.wrapperClass,m,A),se(u,s.controlClass),Ce(d,u),se(h,s.dropdownClass,A),s.copyClassesToDropdown&&se(h,m),se(p,s.dropdownContentClass),Ce(h,p),pe(s.dropdownParent||d).appendChild(h),zn(s.controlInput)){g=pe(s.controlInput);var b=["autocorrect","autocapitalize","autocomplete","spellcheck"];K(b,k=>{r.getAttribute(k)&&j(g,{[k]:r.getAttribute(k)})}),g.tabIndex=-1,u.appendChild(g),this.focus_node=g}else s.controlInput?(g=pe(s.controlInput),this.focus_node=g):(g=pe("<input/>"),this.focus_node=u);this.wrapper=d,this.dropdown=h,this.dropdown_content=p,this.control=u,this.control_input=g,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,l=t.control,d=t.input,u=t.focus_node,h={passive:!0},p=t.inputId+"-ts-dropdown";j(o,{id:p}),j(u,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":p});const m=_t(u,t.inputId+"-ts-control"),A="label[for='"+Cr(t.inputId)+"']",g=document.querySelector(A),b=t.focus.bind(t);if(g){G(g,"click",b),j(g,{for:m});const y=_t(g,t.inputId+"-ts-label");j(u,{"aria-labelledby":y}),j(o,{"aria-labelledby":y})}if(s.style.width=d.style.width,t.plugins.names.length){const y="plugin-"+t.plugins.names.join(" plugin-");se([s,r],y)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&j(d,{multiple:"multiple"}),e.placeholder&&j(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+$e(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=br(e.load,e.loadThrottle)),G(r,"mousemove",()=>{t.ignoreHover=!1}),G(r,"mouseenter",y=>{var M=At(y.target,"[data-selectable]",r);M&&t.onOptionHover(y,M)},{capture:!0}),G(r,"click",y=>{const M=At(y.target,"[data-selectable]");M&&(t.onOptionSelect(y,M),q(y,!0))}),G(l,"click",y=>{var M=At(y.target,"[data-ts-item]",l);if(M&&t.onItemSelect(y,M)){q(y,!0);return}i.value==""&&(t.onClick(),q(y,!0))}),G(u,"keydown",y=>t.onKeyDown(y)),G(i,"keypress",y=>t.onKeyPress(y)),G(i,"input",y=>t.onInput(y)),G(u,"blur",y=>t.onBlur(y)),G(u,"focus",y=>t.onFocus(y)),G(i,"paste",y=>t.onPaste(y));const k=y=>{const M=y.composedPath()[0];if(!s.contains(M)&&!r.contains(M)){t.isFocused&&t.blur(),t.inputState();return}M==i&&t.isOpen?y.stopPropagation():q(y,!0)},S=()=>{t.isOpen&&t.positionDropdown()};G(document,"mousedown",k),G(window,"scroll",S,h),G(window,"resize",S,h),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",S),window.removeEventListener("resize",S),g&&g.removeEventListener("click",b)},this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,d.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,G(d,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,d.disabled?t.disable():d.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),se(d,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),K(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?fn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){Dt(this.input,"input"),Dt(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){q(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);K(r,o=>{de(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){q(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),q(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==dn&&q(t);return}switch(t.keyCode){case Ar:if(we(We,t)&&e.control_input.value==""){q(t),e.selectAll();return}break;case xr:e.isOpen&&(q(t,!0),e.close()),e.clearActiveItems();return;case Mr:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}q(t);return;case Ir:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}q(t);return;case Sr:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),q(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&q(t);return;case Er:e.advanceSelection(-1,t);return;case kr:e.advanceSelection(1,t);return;case dn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),q(t)),e.settings.create&&e.createItem()&&q(t));return;case cn:case Fr:e.deleteSelection(t);return}e.isInputHidden&&!we(We,t)&&q(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=yr(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),q(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(q(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;se(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||me(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,Dt(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];sn(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,l,d,u;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&we("shiftKey",e)&&i.activeItems.length){for(u=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,u),l=Array.prototype.indexOf.call(i.control.children,t),s>l&&(d=s,s=l,l=d),o=s;o<=l;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);q(e)}else r==="click"&&we(We,e)||r==="keydown"&&we("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&me(i,"last-active"),se(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),me(t,"active")}clearActiveItems(){me(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,j(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),j(t,{"aria-selected":"true"}),se(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,l=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;l+s>r+o?this.scroll(l-r+s,e):l<o&&this.scroll(l,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(me(this.activeOption,"active"),j(this.activeOption,{"aria-selected":null})),this.activeOption=null,j(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,K(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(j(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&j(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let l=de(s.id);return!(l&&r.items.indexOf(l)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,l,d,u,h,p;const m={},A=[];var g=this,b=g.inputValue();const k=b===g.lastQuery||b==""&&g.lastQuery==null;var S=g.search(b),y=null,M=g.settings.shouldOpen||!1,N=g.dropdown_content;k&&(y=g.activeOption,y&&(h=y.closest("[data-group]"))),o=S.items.length,typeof g.settings.maxOptions=="number"&&(o=Math.min(o,g.settings.maxOptions)),o>0&&(M=!0);const ie=(O,D)=>{let C=m[O];if(C!==void 0){let E=A[C];if(E!==void 0)return[C,E.fragment]}let T=document.createDocumentFragment();return C=A.length,A.push({fragment:T,order:D,optgroup:O}),[C,T]};for(e=0;e<o;e++){let O=S.items[e];if(!O)continue;let D=O.id,C=g.options[D];if(C===void 0)continue;let T=tt(D),E=g.getOption(T,!0);for(g.settings.hideSelected||E.classList.toggle("selected",g.items.includes(T)),s=C[g.settings.optgroupField]||"",l=Array.isArray(s)?s:[s],i=0,r=l&&l.length;i<r;i++){s=l[i];let te=C.$order,U=g.optgroups[s];U===void 0?s="":te=U.$order;const[Fe,Ae]=ie(s,te);i>0&&(E=E.cloneNode(!0),j(E,{id:C.$id+"-clone-"+i,"aria-selected":null}),E.classList.add("ts-cloned"),me(E,"active"),g.activeOption&&g.activeOption.dataset.value==D&&h&&h.dataset.group===s.toString()&&(y=E)),Ae.appendChild(E),s!=""&&(m[s]=Fe)}}g.settings.lockOptgroupOrder&&A.sort((O,D)=>O.order-D.order),d=document.createDocumentFragment(),K(A,O=>{let D=O.fragment,C=O.optgroup;if(!D||!D.children.length)return;let T=g.optgroups[C];if(T!==void 0){let E=document.createDocumentFragment(),te=g.render("optgroup_header",T);Ce(E,te),Ce(E,D);let U=g.render("optgroup",{group:T,options:E});Ce(d,U)}else Ce(d,D)}),N.innerHTML="",Ce(N,d),g.settings.highlight&&(Dr(N),S.query.length&&S.tokens.length&&K(S.tokens,O=>{_r(N,O.regex)}));var B=O=>{let D=g.render(O,{input:b});return D&&(M=!0,N.insertBefore(D,N.firstChild)),D};if(g.loading?B("loading"):g.settings.shouldLoad.call(g,b)?S.items.length===0&&B("no_results"):B("not_loading"),u=g.canCreate(b),u&&(p=B("option_create")),g.hasOptions=S.items.length>0||u,M){if(S.items.length>0){if(!y&&g.settings.mode==="single"&&g.items[0]!=null&&(y=g.getOption(g.items[0])),!N.contains(y)){let O=0;p&&!g.settings.addPrecedence&&(O=1),y=g.selectable()[O]}}else p&&(y=p);t&&!g.isOpen&&(g.open(),g.scrollToOption(y,"auto")),g.setActiveOption(y)}else g.clearActiveOption(),t&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=de(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){K(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=de(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,o;const s=de(t),l=de(e[i.settings.valueField]);if(s===null)return;const d=i.options[s];if(d==null)return;if(typeof l!="string")throw new Error("Value must be set in option data");const u=i.getOption(s),h=i.getItem(s);if(e.$order=e.$order||d.$order,delete i.options[s],i.uncacheValue(l),i.options[l]=e,u){if(i.dropdown_content.contains(u)){const p=i._render("option",e);jt(u,p),i.activeOption===u&&i.setActiveOption(p)}u.remove()}h&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,l),r=i._render("item",e),h.classList.contains("active")&&se(r,"active"),jt(h,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=tt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};K(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=de(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=de(t);return e!==null?this.control.querySelector(`[data-value="${on(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);const o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];sn(this,i,()=>{var r,o;const s=this,l=s.settings.mode,d=de(t);if(!(d&&s.items.indexOf(d)!==-1&&(l==="single"&&s.close(),l==="single"||!s.settings.duplicates))&&!(d===null||!s.options.hasOwnProperty(d))&&(l==="single"&&s.clear(e),!(l==="multi"&&s.isFull()))){if(r=s._render("item",s.options[d]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,d),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let u=s.getOption(d),h=s.getAdjacent(u,1);h&&s.setActiveOption(h)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&l!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",d,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,o;const s=t.dataset.value;r=ln(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),me(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,l=d=>{if(i.unlock(),!d||typeof d!="object")return e();var u=de(d[i.settings.valueField]);if(typeof u!="string")return e();i.setTextboxValue(),i.addOption(d,!0),i.setCaret(r),i.addItem(u),e(d),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,l):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||l(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Or(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let s=function(u,h,p){return u||(u=pe('<option value="'+Ot(h)+'">'+Ot(p)+"</option>")),u!=o&&e.input.append(u),l.push(u),(u!=o||d>0)&&(u.selected=!0),u};const l=[],d=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(u=>{u.selected=!1}),e.items.length==0&&e.settings.mode=="single"?s(o,"",""):e.items.forEach(u=>{if(i=e.options[u],r=i[e.settings.labelField]||"",l.includes(i.$option)){const h=e.input.querySelector(`option[value="${on(u)}"]:not(:checked)`);s(h,u,r)}else i.$option=s(i.$option,u,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,j(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Ke(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Ke(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,j(e.focus_node,{"aria-expanded":"false"}),Ke(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Ke(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();K(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===cn?-1:1,i=wr(s.control_input);const l=[];if(s.activeItems.length)o=an(s.activeItems,e),r=ln(o),e>0&&r++,K(s.activeItems,d=>l.push(d));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){const d=s.controlChildren();let u;e<0&&i.start===0&&i.length===0?u=d[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(u=d[s.caretPos]),u!==void 0&&l.push(u)}if(!s.shouldDelete(l,t))return!1;for(q(t,!0),typeof r<"u"&&s.setCaret(r);l.length;)s.removeItem(l.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(we(We,e)||we("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return an(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,me(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,Ot),!r))return null;if(r=pe(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?j(r,{"aria-disabled":"true"}):j(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],j(r,{"data-group":i}),e.group[o.settings.disabledField]&&j(r,{"data-disabled":""})),t==="option"||t==="item"){const s=tt(e[o.settings.valueField]);j(r,{"data-value":s}),t==="item"?(se(r,o.settings.itemClass),j(r,{"data-ts-item":""})):(se(r,o.settings.optionClass),j(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){K(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,l;return t==="after"&&(s=o.apply(r,arguments)),l=i.apply(r,arguments),t==="instead"?l:(t==="before"&&(s=o.apply(r,arguments)),s)}}}const Tr=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Pr(){Tr(this.input,"change",()=>{this.sync()})}const $r=n=>typeof n>"u"||n===null?null:Nr(n),Nr=n=>typeof n=="boolean"?n?"1":"0":n+"",hn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Hr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(jr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},jr=n=>typeof n=="string"&&n.indexOf("<")>-1;function Rr(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(s,l){l?(s.checked=!0,i.uncheckedClassNames&&s.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&s.classList.add(...i.checkedClassNames)):(s.checked=!1,i.checkedClassNames&&s.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&s.classList.add(...i.uncheckedClassNames))},o=function(s){setTimeout(()=>{var l=s.querySelector("input."+i.className);l instanceof HTMLInputElement&&r(l,s.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(l,d)=>{var u=Hr(s.call(t,l,d)),h=document.createElement("input");i.className&&h.classList.add(i.className),h.addEventListener("click",function(m){hn(m)}),h.type="checkbox";const p=$r(l[t.settings.valueField]);return r(h,!!(p&&t.items.indexOf(p)>-1)),u.prepend(h),u}}),t.on("item_remove",s=>{var l=t.getOption(s);l&&(l.classList.remove("selected"),o(l))}),t.on("item_add",s=>{var l=t.getOption(s);l&&o(l)}),t.hook("instead","onOptionSelect",(s,l)=>{if(l.classList.contains("selected")){l.classList.remove("selected"),t.removeItem(l.dataset.value),t.refreshOptions(),hn(s,!0);return}e.call(t,s,l),o(l)})}const Vr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Yr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Yr=n=>typeof n=="string"&&n.indexOf("<")>-1;function Br(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=Vr(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const qr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},xe=(n,t,e,i)=>{n.addEventListener(t,e,i)},zr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Kr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Wr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Wr=n=>typeof n=="string"&&n.indexOf("<")>-1,Ur=(n,t)=>{zr(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Qr=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Gr=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Jr=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function Xr(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,l)=>{const d=Kr(o.call(n,s,l));Ur(d,{draggable:"true"});const u=b=>{i||qr(b),b.stopPropagation()},h=b=>{r=d,setTimeout(()=>{d.classList.add("ts-dragging")},0)},p=b=>{b.preventDefault(),d.classList.add("ts-drag-over"),A(d,r)},m=()=>{d.classList.remove("ts-drag-over")},A=(b,k)=>{k!==void 0&&(Jr(k,d)?Qr(b,k):Gr(b,k))},g=()=>{var b;document.querySelectorAll(".ts-drag-over").forEach(S=>S.classList.remove("ts-drag-over")),(b=r)==null||b.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(S=>{if(S.dataset.value){let y=S.dataset.value;y&&k.push(y)}}),n.setValue(k)};return xe(d,"mousedown",u),xe(d,"dragstart",h),xe(d,"dragenter",p),xe(d,"dragover",p),xe(d,"dragleave",m),xe(d,"dragend",g),d}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const Zr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},es=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ts(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ts=n=>typeof n=="string"&&n.indexOf("<")>-1;function ns(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=es(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{Zr(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const is=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},rs=(n,...t)=>{var e=ss(t);n=os(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},ss=n=>{var t=[];return is(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},os=n=>(Array.isArray(n)||(n=[n]),n),as=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function ls(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=as(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),rs(e,"last-active")}else n.setCaret(n.caretPos+t)})}const cs=27,ds=9,us=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},fs=(n,t,e,i)=>{n.addEventListener(t,e,i)},ps=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},gn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(hs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},hs=n=>typeof n=="string"&&n.indexOf("<")>-1,gs=(n,...t)=>{var e=ms(t);n=vs(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ms=n=>{var t=[];return ps(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},vs=n=>(Array.isArray(n)||(n=[n]),n);function ys(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,gs(n.control_input,"dropdown-input");const t=gn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=gn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case cs:n.isOpen&&(us(e,!0),n.close()),n.clearActiveItems();return;case ds:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),fs(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const Ue=(n,t,e,i)=>{n.addEventListener(t,e,i)};function bs(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),Ue(e,"input",r),Ue(e,"keyup",r),Ue(e,"blur",r),Ue(e,"update",r)})}function ws(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function Cs(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const mn=37,Os=39,_s=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Ds=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function As(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===mn||e.keyCode===Os))return t.call(n,e);n.ignoreHover=!0,s=_s(n.activeOption,"[data-group]"),i=Ds(n.activeOption,"[data-selectable]"),s&&(e.keyCode===mn?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}const Ss=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),vn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},yn=(n,t,e,i)=>{n.addEventListener(t,e,i)},bn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(xs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},xs=n=>typeof n=="string"&&n.indexOf("<")>-1;function Es(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Ss(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var l=bn(r.call(e,o,s)),d=bn(i);return l.appendChild(d),yn(d,"mousedown",u=>{vn(u,!0)}),yn(d,"click",u=>{e.isLocked||(vn(u,!0),!e.isLocked&&e.shouldDelete([l],u)&&(e.removeItem(l),e.refreshOptions(!1),e.inputState()))}),l}})}}function Is(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const ks=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ms=(n,...t)=>{var e=Fs(t);n=Ls(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Fs=n=>{var t=[];return ks(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Ls=n=>(Array.isArray(n)||(n=[n]),n);function Ts(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,l,d=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var p=n.selectable(),m=Array.from(p).indexOf(n.activeOption);if(m>=p.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const u=p=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(p in r&&r[p]),h=(p,m)=>n.items.indexOf(m)>=0||d.indexOf(m)>=0;n.setNextUrl=(p,m)=>{r[p]=m},n.getUrl=p=>{if(p in r){const m=r[p];return r[p]=!1,m}return n.clearPagination(),n.settings.firstUrl.call(n,p)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",p=>p in r?u(p):t.call(n,p)),n.hook("instead","loadCallback",(p,m)=>{if(!s)n.clearOptions(h);else if(l){const A=p[0];A!==void 0&&(l.dataset.value=A[n.settings.valueField])}i.call(n,p,m),s=!1}),n.hook("after","refreshOptions",()=>{const p=n.lastValue;var m;u(p)?(m=n.render("loading_more",{query:p}),m&&(m.setAttribute("data-selectable",""),l=m)):p in r&&!o.querySelector(".no-results")&&(m=n.render("no_more_results",{query:p})),m&&(Ms(m,n.settings.optionClass),o.append(m))}),n.on("initialize",()=>{d=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}Z.define("change_listener",Pr);Z.define("checkbox_options",Rr);Z.define("clear_button",Br);Z.define("drag_drop",Xr);Z.define("dropdown_header",ns);Z.define("caret_position",ls);Z.define("dropdown_input",ys);Z.define("input_autogrow",bs);Z.define("no_backspace_delete",ws);Z.define("no_active_items",Cs);Z.define("optgroup_columns",As);Z.define("remove_button",Es);Z.define("restore_on_backspace",Is);Z.define("virtual_scroll",Ts);const Ps=n=>({init(){const t=this.$refs[`select_picker_${n.dataField}_${n.tableName}`],e={items:n.initialValues,...n.framework,onChange:o=>{Rn(n,o)},onInitialize:()=>{n.appliedFilters&&n.dataField&&this.applyFilterForDataField(n.appliedFilters,n.dataField,t),window.addEventListener(`pg:clear_multi_select::${n.tableName}:${n.dataField}`,()=>{t&&t.tomselect.clear(!0)}),window.addEventListener(`pg:clear_all_multi_select::${n.tableName}`,()=>{t&&t.tomselect.clear(!0)})}},i={valueField:n.optionValue,labelField:n.optionLabel,searchField:n.optionLabel,load:async function(o,s){function l(d,u){var h;const{method:p,url:m}=d,A=new Request(m,{method:p,body:p.toLowerCase()==="post"?JSON.stringify({search:u,...r}):void 0});A.headers.set("Content-Type","application/json"),A.headers.set("Accept","application/json"),A.headers.set("X-Requested-With","XMLHttpRequest");const g=(h=document.head.querySelector('[name="csrf-token"]'))==null?void 0:h.getAttribute("content");return g&&A.headers.set("X-CSRF-TOKEN",g),A}fetch(l(n.asyncData,o)).then(d=>d.json()).then(d=>{s(d)}).catch(()=>{s()})},render:{option:function(o,s){return`<div class="py-2 mb-1"><span>${s(o[n.optionLabel])}</span></div>`},item:function(o,s){return`<div class="py-2 mb-1"><span>${s(o[n.optionLabel])}</span></div>`}}};let r=e;n.hasOwnProperty("asyncData")&&(r=Object.assign(e,i)),new Z(t,r)},applyFilterForDataField(t,e,i){const r=e.split(".");let o=t;for(const s of r)if(o&&typeof o=="object"&&o.hasOwnProperty(s))o=o[s];else return;Array.isArray(o)&&o.length>0&&i.tomselect.addItems(o)}}),$s=n=>({initialValues:n.initialValues,framework:n.framework,init(){const t=this.$refs["select_picker_"+n.dataField+"_"+n.tableName],e=this.deepCopy(this.framework);new window.SlimSelect({select:t,...e,events:{afterChange:i=>{let r=i.map(o=>o.value);Rn(n,r)}}}),n.appliedFilters&&n.dataField&&this.applyFilterForDataField(n.appliedFilters,n.dataField,t),window.addEventListener("pg:clear_multi_select::"+n.tableName+":"+n.dataField,()=>{t.slim.setSelected([],!1)}),window.addEventListener("pg:clear_all_multi_select::"+n.tableName,()=>{t.slim.setSelected([],!1)})},applyFilterForDataField(t,e,i){const r=e.split(".");let o=t;for(const s of r)if(o&&typeof o=="object"&&o.hasOwnProperty(s))o=o[s];else return;Array.isArray(o)&&o.length>0&&i.slim.setSelected(o,!1)},deepCopy(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(this.deepCopy);const e={};for(const i in t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}}),Ns=()=>({init(){Livewire.on("pg:scrollTop",n=>{setTimeout(()=>{document.querySelector("body").scrollIntoView({behavior:"auto"})},0)}),new IntersectionObserver(n=>{n[0].isIntersecting&&this.$wire.call("loadMore")},{rootMargin:"300px"}).observe(this.$el)}}),Hs=n=>({rowId:(n==null?void 0:n.rowId)??null,parentId:(n==null?void 0:n.parentId)??null,toHtml(){let t=null;const e=this.parentId??this.$wire.id;if(this.rowId){const r=window[`pgActions_${e}`];r&&r[this.rowId]!==void 0&&(t=r[this.rowId])}else t=window[`pgActionsHeader_${e}`];if(typeof t!="object"||t===null)return"";let i="";return t.forEach(r=>{let o=this.shouldHideAction(r),s=this.getReplaceHtml(r);if(!o)if(s)i+=s;else{let l=this.buildAttributesString(r);if(r.icon){let d=this.processIcon(r);if(!d)return;i+=this.buildActionHtmlWithIcon(r,l,d)}else i+=this.buildActionHtml(r,l)}}),i},shouldHideAction(t){if(t.can===!1)return!0;let e=!1;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.action.includes(t.action)&&i.apply&&i.rule.hide&&(e=!0)}),e},getReplaceHtml(t){let e=null;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.replaceHtml&&(e=i.replaceHtml)}),e},buildAttributesString(t){let e=t.attributes??[];return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.rule.setAttribute&&i.rule.setAttribute.length>0&&Object.values(i.rule.setAttribute).forEach(r=>{e[r.attribute]=r.value})}),Object.entries(e).map(([i,r])=>` ${i}="${r}"`).join("")},processIcon(t){const e=Object.entries(t.iconAttributes??[]).map(([r,o])=>` ${r}="${o}"`).join("");let i=window.pgResourceIcons[t.icon];return typeof i>"u"?(console.warn(`PowerGrid: Unable to load icons in javascript window in row: [${this.rowId}]`),null):this.replaceIconAttributes(i,e)},replaceIconAttributes(t,e){return t.replace(/<([^\s>]+)([^>]*)>/,(i,r,o)=>{let s=o.trim();const l=e.replace(/class="([^"]*)"/,(d,u)=>(s.includes("class=")?s=s.replace(/class="([^"]*)"/,(h,p)=>`class="${p} ${u.trim()}"`):s+=` ${d}`,""));return`<${r} ${s} ${l}>`})},buildActionHtmlWithIcon(t,e,i){return t.slot?`<${t.tag??"button"} ${e}>${i} ${t.slot}</${t.tag??"button"}>`:`<${t.tag??"button"} ${e}>${i}</${t.tag??"button"}>`},buildActionHtml(t,e){return`<${t.tag??"button"} ${e}>${t.slot}</${t.tag??"button"}>`}}),js=n=>({templateContent:(n==null?void 0:n.templateContent)??null,rendered:null,parentId:(n==null?void 0:n.parentId)??null,init(){const t=Object.keys(this.templateContent)[0],e=window[`pgRowTemplates_${this.parentId??this.$wire.id}`][t],i=this.templateContent[t];if(i){let r=e;for(const[o,s]of Object.entries(i)){const l=`{{ ${o} }}`,d=String(s).replace(/'/g,"\\'");r=r.replaceAll(l,d)}this.rendered=r}}}),Rs=n=>({rowId:n.rowId,rules:n.rules,defaultClasses:n.defaultClasses,attributes:[],theme:[],init(){this.rules&&Object.values(this.rules).forEach(t=>{(t.applyLoop||t.apply)&&t!=null&&t.attributes&&this.attributes.push(t.attributes)})},getAttributes(){let t={class:this.defaultClasses};return this.attributes.forEach(e=>{Object.keys(e).forEach(i=>{typeof e[i]=="object"?t[e[i].key]=e[i].value:t[i]?t[i]+=` ${e[i]}`:t[i]=e[i]})}),t}});window.pgToggleable=Hi;window.pgFlatpickr=Ri;window.pgEditable=Vi;window.pgResponsive=Ui;window.pgTomSelect=Ps;window.pgSlimSelect=$s;window.pgLoadMore=Ns;window.pgRenderActions=Hs;window.pgRowAttributes=Rs;window.pgRenderRowTemplate=js;document.addEventListener("DOMContentLoaded",()=>{Livewire.hook("commit",({component:n,succeed:t,fail:e})=>{n.ephemeral.setUp&&n.ephemeral.setUp.hasOwnProperty("responsive")&&(t(()=>{queueMicrotask(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))})}),e(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))}))})});document.addEventListener("DOMContentLoaded",()=>{window.Alpine.directive("multisort-shift-click",(n,{expression:t})=>{n.addEventListener("click",e=>{window.Livewire.find(t).set("multiSort",e.shiftKey)})})});var St=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ke={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ne={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ne=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},ce=function(n){return n===!0?1:0};function wn(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var xt=function(n){return n instanceof Array?n:[n]};function J(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function $(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function Qe(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Un(n,t){if(t(n))return n;if(n.parentNode)return Un(n.parentNode,t)}function Ge(n,t){var e=$("div","numInputWrapper"),i=$("input","numInput "+n),r=$("span","arrowUp"),o=$("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var s in t)i.setAttribute(s,t[s]);return e.appendChild(i),e.appendChild(r),e.appendChild(o),e}function oe(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var Et=function(){},ot=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},Vs={D:Et,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*ce(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:Et,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:Et,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},De={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Pe={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Pe.w(n,t,e)]},F:function(n,t,e){return ot(Pe.n(n,t,e)-1,!1,t)},G:function(n,t,e){return ne(Pe.h(n,t,e))},H:function(n){return ne(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[ce(n.getHours()>11)]},M:function(n,t){return ot(n.getMonth(),!0,t)},S:function(n){return ne(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return ne(n.getFullYear(),4)},d:function(n){return ne(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ne(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return ne(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Qn=function(n){var t=n.config,e=t===void 0?ke:t,i=n.l10n,r=i===void 0?Ne:i,o=n.isMobile,s=o===void 0?!1:o;return function(l,d,u){var h=u||r;return e.formatDate!==void 0&&!s?e.formatDate(l,d,h):d.split("").map(function(p,m,A){return Pe[p]&&A[m-1]!=="\\"?Pe[p](l,h,e):p!=="\\"?p:""}).join("")}},Rt=function(n){var t=n.config,e=t===void 0?ke:t,i=n.l10n,r=i===void 0?Ne:i;return function(o,s,l,d){if(!(o!==0&&!o)){var u=d||r,h,p=o;if(o instanceof Date)h=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)h=new Date(o);else if(typeof o=="string"){var m=s||(e||ke).dateFormat,A=String(o).trim();if(A==="today")h=new Date,l=!0;else if(e&&e.parseDate)h=e.parseDate(o,m);else if(/Z$/.test(A)||/GMT$/.test(A))h=new Date(o);else{for(var g=void 0,b=[],k=0,S=0,y="";k<m.length;k++){var M=m[k],N=M==="\\",ie=m[k-1]==="\\"||N;if(De[M]&&!ie){y+=De[M];var B=new RegExp(y).exec(o);B&&(g=!0)&&b[M!=="Y"?"push":"unshift"]({fn:Vs[M],val:B[++S]})}else N||(y+=".")}h=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(O){var D=O.fn,C=O.val;return h=D(h,C,u)||h}),h=g?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){e.errorHandler(new Error("Invalid date provided: "+p));return}return l===!0&&h.setHours(0,0,0,0),h}}};function le(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Ys=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},It=function(n,t,e){return n*3600+t*60+e},Bs=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},qs={DAY:864e5};function kt(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var r=n.minDate.getHours(),o=n.minDate.getMinutes(),s=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<o&&(e=o),t===r&&e===o&&i<s&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),d=n.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(d,e)),t===l&&e===d&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(d){return n[d]=l[d]})},r=0,o=t;r<o.length;r++){var s=o[r];i(s)}return n});var Q=function(){return Q=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Q.apply(this,arguments)},Cn=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),r=0,t=0;t<e;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)i[r]=o[s];return i},zs=300;function Ks(n,t){var e={config:Q(Q({},ke),z.defaultConfig),l10n:Ne};e.parseDate=Rt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=b,e._setHoursFromDate=m,e._positionCalendar=Ye,e.changeMonth=ft,e.changeYear=je,e.clear=ai,e.close=li,e.onMouseOver=Ve,e._createElement=$,e.createDay=B,e.destroy=ci,e.isEnabled=ye,e.jumpToDate=y,e.updateValue=ge,e.open=fi,e.redraw=Gt,e.set=mi,e.setDate=vi,e.toggle=Ci;function i(){e.utils={getDaysInMonth:function(a,c){return a===void 0&&(a=e.currentMonth),c===void 0&&(c=e.currentYear),a===1&&(c%4===0&&c%100!==0||c%400===0)?29:e.l10n.daysInMonth[a]}}}function r(){e.element=e.input=n,e.isOpen=!1,pi(),Qt(),bi(),yi(),i(),e.isMobile||ie(),S(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),ge(!1)),l();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&a&&Ye(),V("onReady")}function o(){var a;return((a=e.calendarContainer)===null||a===void 0?void 0:a.getRootNode()).activeElement||document.activeElement}function s(a){return a.bind(e)}function l(){var a=e.config;a.weekNumbers===!1&&a.showMonths===1||a.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var c=(e.days.offsetWidth+1)*a.showMonths;e.daysContainer.style.width=c+"px",e.calendarContainer.style.width=c+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function d(a){if(e.selectedDates.length===0){var c=e.config.minDate===void 0||le(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),f=kt(e.config);c.setHours(f.hours,f.minutes,f.seconds,c.getMilliseconds()),e.selectedDates=[c],e.latestSelectedDateObj=c}a!==void 0&&a.type!=="blur"&&Di(a);var v=e._input.value;p(),ge(),e._input.value!==v&&e._debouncedChange()}function u(a,c){return a%12+12*ce(c===e.l10n.amPM[1])}function h(a){switch(a%24){case 0:case 12:return 12;default:return a%12}}function p(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var a=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,c=(parseInt(e.minuteElement.value,10)||0)%60,f=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(a=u(a,e.amPM.textContent));var v=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.minDate,!0)===0,w=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var _=It(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),L=It(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),I=It(a,c,f);if(I>L&&I<_){var P=Bs(_);a=P[0],c=P[1],f=P[2]}}else{if(w){var x=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;a=Math.min(a,x.getHours()),a===x.getHours()&&(c=Math.min(c,x.getMinutes())),c===x.getMinutes()&&(f=Math.min(f,x.getSeconds()))}if(v){var F=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;a=Math.max(a,F.getHours()),a===F.getHours()&&c<F.getMinutes()&&(c=F.getMinutes()),c===F.getMinutes()&&(f=Math.max(f,F.getSeconds()))}}A(a,c,f)}}function m(a){var c=a||e.latestSelectedDateObj;c&&c instanceof Date&&A(c.getHours(),c.getMinutes(),c.getSeconds())}function A(a,c,f){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(a%24,c,f||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ne(e.config.time_24hr?a:(12+a)%12+12*ce(a%12===0)),e.minuteElement.value=ne(c),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[ce(a>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ne(f)))}function g(a){var c=oe(a),f=parseInt(c.value)+(a.delta||0);(f/1e3>1||a.key==="Enter"&&!/[^\d]/.test(f.toString()))&&je(f)}function b(a,c,f,v){if(c instanceof Array)return c.forEach(function(w){return b(a,w,f,v)});if(a instanceof Array)return a.forEach(function(w){return b(w,c,f,v)});a.addEventListener(c,f,v),e._handlers.push({remove:function(){return a.removeEventListener(c,f,v)}})}function k(){V("onChange")}function S(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(f){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+f+"]"),function(v){return b(v,"click",e[f])})}),e.isMobile){wi();return}var a=wn(ui,50);if(e._debouncedChange=wn(k,zs),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(e.daysContainer,"mouseover",function(f){e.config.mode==="range"&&Ve(oe(f))}),b(e._input,"keydown",Kt),e.calendarContainer!==void 0&&b(e.calendarContainer,"keydown",Kt),!e.config.inline&&!e.config.static&&b(window,"resize",a),window.ontouchstart!==void 0?b(window.document,"touchstart",pt):b(window.document,"mousedown",pt),b(window.document,"focus",pt,{capture:!0}),e.config.clickOpens===!0&&(b(e._input,"focus",e.open),b(e._input,"click",e.open)),e.daysContainer!==void 0&&(b(e.monthNav,"click",_i),b(e.monthNav,["keyup","increment"],g),b(e.daysContainer,"click",Jt)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var c=function(f){return oe(f).select()};b(e.timeContainer,["increment"],d),b(e.timeContainer,"blur",d,{capture:!0}),b(e.timeContainer,"click",M),b([e.hourElement,e.minuteElement],["focus","click"],c),e.secondElement!==void 0&&b(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&b(e.amPM,"click",function(f){d(f)})}e.config.allowInput&&b(e._input,"blur",di)}function y(a,c){var f=a!==void 0?e.parseDate(a):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),v=e.currentYear,w=e.currentMonth;try{f!==void 0&&(e.currentYear=f.getFullYear(),e.currentMonth=f.getMonth())}catch(_){_.message="Invalid date supplied: "+f,e.config.errorHandler(_)}c&&e.currentYear!==v&&(V("onYearChange"),U()),c&&(e.currentYear!==v||e.currentMonth!==w)&&V("onMonthChange"),e.redraw()}function M(a){var c=oe(a);~c.className.indexOf("arrow")&&N(a,c.classList.contains("arrowUp")?1:-1)}function N(a,c,f){var v=a&&oe(a),w=f||v&&v.parentNode&&v.parentNode.firstChild,_=gt("increment");_.delta=c,w&&w.dispatchEvent(_)}function ie(){var a=window.document.createDocumentFragment();if(e.calendarContainer=$("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(a.appendChild(ri()),e.innerContainer=$("div","flatpickr-innerContainer"),e.config.weekNumbers){var c=oi(),f=c.weekWrapper,v=c.weekNumbers;e.innerContainer.appendChild(f),e.weekNumbers=v,e.weekWrapper=f}e.rContainer=$("div","flatpickr-rContainer"),e.rContainer.appendChild(qt()),e.daysContainer||(e.daysContainer=$("div","flatpickr-days"),e.daysContainer.tabIndex=-1),te(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),a.appendChild(e.innerContainer)}e.config.enableTime&&a.appendChild(si()),J(e.calendarContainer,"rangeMode",e.config.mode==="range"),J(e.calendarContainer,"animate",e.config.animate===!0),J(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(a);var w=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!w&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var _=$("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(_,e.element),_.appendChild(e.element),e.altInput&&_.appendChild(e.altInput),_.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function B(a,c,f,v){var w=ye(c,!0),_=$("span",a,c.getDate().toString());return _.dateObj=c,_.$i=v,_.setAttribute("aria-label",e.formatDate(c,e.config.ariaDateFormat)),a.indexOf("hidden")===-1&&le(c,e.now)===0&&(e.todayDateElem=_,_.classList.add("today"),_.setAttribute("aria-current","date")),w?(_.tabIndex=-1,mt(c)&&(_.classList.add("selected"),e.selectedDateElem=_,e.config.mode==="range"&&(J(_,"startRange",e.selectedDates[0]&&le(c,e.selectedDates[0],!0)===0),J(_,"endRange",e.selectedDates[1]&&le(c,e.selectedDates[1],!0)===0),a==="nextMonthDay"&&_.classList.add("inRange")))):_.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Oi(c)&&!mt(c)&&_.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&a!=="prevMonthDay"&&v%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(c)+"</span>"),V("onDayCreate",_),_}function O(a){a.focus(),e.config.mode==="range"&&Ve(a)}function D(a){for(var c=a>0?0:e.config.showMonths-1,f=a>0?e.config.showMonths:-1,v=c;v!=f;v+=a)for(var w=e.daysContainer.children[v],_=a>0?0:w.children.length-1,L=a>0?w.children.length:-1,I=_;I!=L;I+=a){var P=w.children[I];if(P.className.indexOf("hidden")===-1&&ye(P.dateObj))return P}}function C(a,c){for(var f=a.className.indexOf("Month")===-1?a.dateObj.getMonth():e.currentMonth,v=c>0?e.config.showMonths:-1,w=c>0?1:-1,_=f-e.currentMonth;_!=v;_+=w)for(var L=e.daysContainer.children[_],I=f-e.currentMonth===_?a.$i+c:c<0?L.children.length-1:0,P=L.children.length,x=I;x>=0&&x<P&&x!=(c>0?P:-1);x+=w){var F=L.children[x];if(F.className.indexOf("hidden")===-1&&ye(F.dateObj)&&Math.abs(a.$i-x)>=Math.abs(c))return O(F)}e.changeMonth(w),T(D(w),0)}function T(a,c){var f=o(),v=Re(f||document.body),w=a!==void 0?a:v?f:e.selectedDateElem!==void 0&&Re(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Re(e.todayDateElem)?e.todayDateElem:D(c>0?1:-1);w===void 0?e._input.focus():v?C(w,c):O(w)}function E(a,c){for(var f=(new Date(a,c,1).getDay()-e.l10n.firstDayOfWeek+7)%7,v=e.utils.getDaysInMonth((c-1+12)%12,a),w=e.utils.getDaysInMonth(c,a),_=window.document.createDocumentFragment(),L=e.config.showMonths>1,I=L?"prevMonthDay hidden":"prevMonthDay",P=L?"nextMonthDay hidden":"nextMonthDay",x=v+1-f,F=0;x<=v;x++,F++)_.appendChild(B("flatpickr-day "+I,new Date(a,c-1,x),x,F));for(x=1;x<=w;x++,F++)_.appendChild(B("flatpickr-day",new Date(a,c,x),x,F));for(var H=w+1;H<=42-f&&(e.config.showMonths===1||F%7!==0);H++,F++)_.appendChild(B("flatpickr-day "+P,new Date(a,c+1,H%w),H,F));var fe=$("div","dayContainer");return fe.appendChild(_),fe}function te(){if(e.daysContainer!==void 0){Qe(e.daysContainer),e.weekNumbers&&Qe(e.weekNumbers);for(var a=document.createDocumentFragment(),c=0;c<e.config.showMonths;c++){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+c),a.appendChild(E(f.getFullYear(),f.getMonth()))}e.daysContainer.appendChild(a),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ve()}}function U(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var a=function(v){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&v<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&v>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var c=0;c<12;c++)if(a(c)){var f=$("option","flatpickr-monthDropdown-month");f.value=new Date(e.currentYear,c).getMonth().toString(),f.textContent=ot(c,e.config.shorthandCurrentMonth,e.l10n),f.tabIndex=-1,e.currentMonth===c&&(f.selected=!0),e.monthsDropdownContainer.appendChild(f)}}}function Fe(){var a=$("div","flatpickr-month"),c=window.document.createDocumentFragment(),f;e.config.showMonths>1||e.config.monthSelectorType==="static"?f=$("span","cur-month"):(e.monthsDropdownContainer=$("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),b(e.monthsDropdownContainer,"change",function(L){var I=oe(L),P=parseInt(I.value,10);e.changeMonth(P-e.currentMonth),V("onMonthChange")}),U(),f=e.monthsDropdownContainer);var v=Ge("cur-year",{tabindex:"-1"}),w=v.getElementsByTagName("input")[0];w.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&w.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(w.setAttribute("max",e.config.maxDate.getFullYear().toString()),w.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var _=$("div","flatpickr-current-month");return _.appendChild(f),_.appendChild(v),c.appendChild(_),a.appendChild(c),{container:a,yearElement:w,monthElement:f}}function Ae(){Qe(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var a=e.config.showMonths;a--;){var c=Fe();e.yearElements.push(c.yearElement),e.monthElements.push(c.monthElement),e.monthNav.appendChild(c.container)}e.monthNav.appendChild(e.nextMonthNav)}function ri(){return e.monthNav=$("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=$("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=$("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Ae(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(a){e.__hidePrevMonthArrow!==a&&(J(e.prevMonthNav,"flatpickr-disabled",a),e.__hidePrevMonthArrow=a)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(a){e.__hideNextMonthArrow!==a&&(J(e.nextMonthNav,"flatpickr-disabled",a),e.__hideNextMonthArrow=a)}}),e.currentYearElement=e.yearElements[0],qe(),e.monthNav}function si(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var a=kt(e.config);e.timeContainer=$("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var c=$("span","flatpickr-time-separator",":"),f=Ge("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=f.getElementsByTagName("input")[0];var v=Ge("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=v.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?a.hours:h(a.hours)),e.minuteElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():a.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(f),e.timeContainer.appendChild(c),e.timeContainer.appendChild(v),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var w=Ge("flatpickr-second");e.secondElement=w.getElementsByTagName("input")[0],e.secondElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():a.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild($("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(w)}return e.config.time_24hr||(e.amPM=$("span","flatpickr-am-pm",e.l10n.amPM[ce((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function qt(){e.weekdayContainer?Qe(e.weekdayContainer):e.weekdayContainer=$("div","flatpickr-weekdays");for(var a=e.config.showMonths;a--;){var c=$("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(c)}return zt(),e.weekdayContainer}function zt(){if(e.weekdayContainer){var a=e.l10n.firstDayOfWeek,c=Cn(e.l10n.weekdays.shorthand);a>0&&a<c.length&&(c=Cn(c.splice(a,c.length),c.splice(0,a)));for(var f=e.config.showMonths;f--;)e.weekdayContainer.children[f].innerHTML=`
      <span class='flatpickr-weekday'>
        `+c.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function oi(){e.calendarContainer.classList.add("hasWeeks");var a=$("div","flatpickr-weekwrapper");a.appendChild($("span","flatpickr-weekday",e.l10n.weekAbbreviation));var c=$("div","flatpickr-weeks");return a.appendChild(c),{weekWrapper:a,weekNumbers:c}}function ft(a,c){c===void 0&&(c=!0);var f=c?a:a-e.currentMonth;f<0&&e._hidePrevMonthArrow===!0||f>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=f,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,V("onYearChange"),U()),te(),V("onMonthChange"),qe())}function ai(a,c){if(a===void 0&&(a=!0),c===void 0&&(c=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,c===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var f=kt(e.config),v=f.hours,w=f.minutes,_=f.seconds;A(v,w,_)}e.redraw(),a&&V("onChange")}function li(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),V("onClose")}function ci(){e.config!==void 0&&V("onDestroy");for(var a=e._handlers.length;a--;)e._handlers[a].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var c=e.calendarContainer.parentNode;if(c.lastChild&&c.removeChild(c.lastChild),c.parentNode){for(;c.firstChild;)c.parentNode.insertBefore(c.firstChild,c);c.parentNode.removeChild(c)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(f){try{delete e[f]}catch{}})}function Le(a){return e.calendarContainer.contains(a)}function pt(a){if(e.isOpen&&!e.config.inline){var c=oe(a),f=Le(c),v=c===e.input||c===e.altInput||e.element.contains(c)||a.path&&a.path.indexOf&&(~a.path.indexOf(e.input)||~a.path.indexOf(e.altInput)),w=!v&&!f&&!Le(a.relatedTarget),_=!e.config.ignoredFocusElements.some(function(L){return L.contains(c)});w&&_&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&d(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function je(a){if(!(!a||e.config.minDate&&a<e.config.minDate.getFullYear()||e.config.maxDate&&a>e.config.maxDate.getFullYear())){var c=a,f=e.currentYear!==c;e.currentYear=c||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),f&&(e.redraw(),V("onYearChange"),U())}}function ye(a,c){var f;c===void 0&&(c=!0);var v=e.parseDate(a,void 0,c);if(e.config.minDate&&v&&le(v,e.config.minDate,c!==void 0?c:!e.minDateHasTime)<0||e.config.maxDate&&v&&le(v,e.config.maxDate,c!==void 0?c:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(v===void 0)return!1;for(var w=!!e.config.enable,_=(f=e.config.enable)!==null&&f!==void 0?f:e.config.disable,L=0,I=void 0;L<_.length;L++){if(I=_[L],typeof I=="function"&&I(v))return w;if(I instanceof Date&&v!==void 0&&I.getTime()===v.getTime())return w;if(typeof I=="string"){var P=e.parseDate(I,void 0,!0);return P&&P.getTime()===v.getTime()?w:!w}else if(typeof I=="object"&&v!==void 0&&I.from&&I.to&&v.getTime()>=I.from.getTime()&&v.getTime()<=I.to.getTime())return w}return!w}function Re(a){return e.daysContainer!==void 0?a.className.indexOf("hidden")===-1&&a.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(a):!1}function di(a){var c=a.target===e._input,f=e._input.value.trimEnd()!==vt();c&&f&&!(a.relatedTarget&&Le(a.relatedTarget))&&e.setDate(e._input.value,!0,a.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Kt(a){var c=oe(a),f=e.config.wrap?n.contains(c):c===e._input,v=e.config.allowInput,w=e.isOpen&&(!v||!f),_=e.config.inline&&f&&!v;if(a.keyCode===13&&f){if(v)return e.setDate(e._input.value,!0,c===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),c.blur();e.open()}else if(Le(c)||w||_){var L=!!e.timeContainer&&e.timeContainer.contains(c);switch(a.keyCode){case 13:L?(a.preventDefault(),d(),ht()):Jt(a);break;case 27:a.preventDefault(),ht();break;case 8:case 46:f&&!e.config.allowInput&&(a.preventDefault(),e.clear());break;case 37:case 39:if(!L&&!f){a.preventDefault();var I=o();if(e.daysContainer!==void 0&&(v===!1||I&&Re(I))){var P=a.keyCode===39?1:-1;a.ctrlKey?(a.stopPropagation(),ft(P),T(D(1),0)):T(void 0,P)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:a.preventDefault();var x=a.keyCode===40?1:-1;e.daysContainer&&c.$i!==void 0||c===e.input||c===e.altInput?a.ctrlKey?(a.stopPropagation(),je(e.currentYear-x),T(D(1),0)):L||T(void 0,x*7):c===e.currentYearElement?je(e.currentYear-x):e.config.enableTime&&(!L&&e.hourElement&&e.hourElement.focus(),d(a),e._debouncedChange());break;case 9:if(L){var F=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(re){return re}),H=F.indexOf(c);if(H!==-1){var fe=F[H+(a.shiftKey?-1:1)];a.preventDefault(),(fe||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(c)&&a.shiftKey&&(a.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&c===e.amPM)switch(a.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],p(),ge();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],p(),ge();break}(f||Le(c))&&V("onKeyDown",a)}function Ve(a,c){if(c===void 0&&(c="flatpickr-day"),!(e.selectedDates.length!==1||a&&(!a.classList.contains(c)||a.classList.contains("flatpickr-disabled")))){for(var f=a?a.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),v=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),w=Math.min(f,e.selectedDates[0].getTime()),_=Math.max(f,e.selectedDates[0].getTime()),L=!1,I=0,P=0,x=w;x<_;x+=qs.DAY)ye(new Date(x),!0)||(L=L||x>w&&x<_,x<v&&(!I||x>I)?I=x:x>v&&(!P||x<P)&&(P=x));var F=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+c));F.forEach(function(H){var fe=H.dateObj,re=fe.getTime(),Te=I>0&&re<I||P>0&&re>P;if(Te){H.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Se){H.classList.remove(Se)});return}else if(L&&!Te)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Se){H.classList.remove(Se)}),a!==void 0&&(a.classList.add(f<=e.selectedDates[0].getTime()?"startRange":"endRange"),v<f&&re===v?H.classList.add("startRange"):v>f&&re===v&&H.classList.add("endRange"),re>=I&&(P===0||re<=P)&&Ys(re,v,f)&&H.classList.add("inRange"))})}}function ui(){e.isOpen&&!e.config.static&&!e.config.inline&&Ye()}function fi(a,c){if(c===void 0&&(c=e._positionElement),e.isMobile===!0){if(a){a.preventDefault();var f=oe(a);f&&f.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),V("onOpen");return}else if(e._input.disabled||e.config.inline)return;var v=e.isOpen;e.isOpen=!0,v||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),V("onOpen"),Ye(c)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(a===void 0||!e.timeContainer.contains(a.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Wt(a){return function(c){var f=e.config["_"+a+"Date"]=e.parseDate(c,e.config.dateFormat),v=e.config["_"+(a==="min"?"max":"min")+"Date"];f!==void 0&&(e[a==="min"?"minDateHasTime":"maxDateHasTime"]=f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(w){return ye(w)}),!e.selectedDates.length&&a==="min"&&m(f),ge()),e.daysContainer&&(Gt(),f!==void 0?e.currentYearElement[a]=f.getFullYear().toString():e.currentYearElement.removeAttribute(a),e.currentYearElement.disabled=!!v&&f!==void 0&&v.getFullYear()===f.getFullYear())}}function pi(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],c=Q(Q({},JSON.parse(JSON.stringify(n.dataset||{}))),t),f={};e.config.parseDate=c.parseDate,e.config.formatDate=c.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(F){e.config._enable=Zt(F)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(F){e.config._disable=Zt(F)}});var v=c.mode==="time";if(!c.dateFormat&&(c.enableTime||v)){var w=z.defaultConfig.dateFormat||ke.dateFormat;f.dateFormat=c.noCalendar||v?"H:i"+(c.enableSeconds?":S":""):w+" H:i"+(c.enableSeconds?":S":"")}if(c.altInput&&(c.enableTime||v)&&!c.altFormat){var _=z.defaultConfig.altFormat||ke.altFormat;f.altFormat=c.noCalendar||v?"h:i"+(c.enableSeconds?":S K":" K"):_+(" h:i"+(c.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Wt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Wt("max")});var L=function(F){return function(H){e.config[F==="min"?"_minTime":"_maxTime"]=e.parseDate(H,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:L("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:L("max")}),c.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,f,c);for(var I=0;I<a.length;I++)e.config[a[I]]=e.config[a[I]]===!0||e.config[a[I]]==="true";St.filter(function(F){return e.config[F]!==void 0}).forEach(function(F){e.config[F]=xt(e.config[F]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var I=0;I<e.config.plugins.length;I++){var P=e.config.plugins[I](e)||{};for(var x in P)St.indexOf(x)>-1?e.config[x]=xt(P[x]).map(s).concat(e.config[x]):typeof c[x]>"u"&&(e.config[x]=P[x])}c.altInputClass||(e.config.altInputClass=Ut().className+" "+e.config.altInputClass),V("onParseConfig")}function Ut(){return e.config.wrap?n.querySelector("[data-input]"):n}function Qt(){typeof e.config.locale!="object"&&typeof z.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Q(Q({},z.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?z.l10ns[e.config.locale]:void 0),De.D="("+e.l10n.weekdays.shorthand.join("|")+")",De.l="("+e.l10n.weekdays.longhand.join("|")+")",De.M="("+e.l10n.months.shorthand.join("|")+")",De.F="("+e.l10n.months.longhand.join("|")+")",De.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var a=Q(Q({},t),JSON.parse(JSON.stringify(n.dataset||{})));a.time_24hr===void 0&&z.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Qn(e),e.parseDate=Rt({config:e.config,l10n:e.l10n})}function Ye(a){if(typeof e.config.position=="function")return void e.config.position(e,a);if(e.calendarContainer!==void 0){V("onPreCalendarPosition");var c=a||e._positionElement,f=Array.prototype.reduce.call(e.calendarContainer.children,(function(Fi,Li){return Fi+Li.offsetHeight}),0),v=e.calendarContainer.offsetWidth,w=e.config.position.split(" "),_=w[0],L=w.length>1?w[1]:null,I=c.getBoundingClientRect(),P=window.innerHeight-I.bottom,x=_==="above"||_!=="below"&&P<f&&I.top>f,F=window.pageYOffset+I.top+(x?-f-2:c.offsetHeight+2);if(J(e.calendarContainer,"arrowTop",!x),J(e.calendarContainer,"arrowBottom",x),!e.config.inline){var H=window.pageXOffset+I.left,fe=!1,re=!1;L==="center"?(H-=(v-I.width)/2,fe=!0):L==="right"&&(H-=v-I.width,re=!0),J(e.calendarContainer,"arrowLeft",!fe&&!re),J(e.calendarContainer,"arrowCenter",fe),J(e.calendarContainer,"arrowRight",re);var Te=window.document.body.offsetWidth-(window.pageXOffset+I.right),Se=H+v>window.document.body.offsetWidth,Ai=Te+v>window.document.body.offsetWidth;if(J(e.calendarContainer,"rightMost",Se),!e.config.static)if(e.calendarContainer.style.top=F+"px",!Se)e.calendarContainer.style.left=H+"px",e.calendarContainer.style.right="auto";else if(!Ai)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Te+"px";else{var yt=hi();if(yt===void 0)return;var Si=window.document.body.offsetWidth,xi=Math.max(0,Si/2-v/2),Ei=".flatpickr-calendar.centerMost:before",Ii=".flatpickr-calendar.centerMost:after",ki=yt.cssRules.length,Mi="{left:"+I.left+"px;right:auto;}";J(e.calendarContainer,"rightMost",!1),J(e.calendarContainer,"centerMost",!0),yt.insertRule(Ei+","+Ii+Mi,ki),e.calendarContainer.style.left=xi+"px",e.calendarContainer.style.right="auto"}}}}function hi(){for(var a=null,c=0;c<document.styleSheets.length;c++){var f=document.styleSheets[c];if(f.cssRules){try{f.cssRules}catch{continue}a=f;break}}return a??gi()}function gi(){var a=document.createElement("style");return document.head.appendChild(a),a.sheet}function Gt(){e.config.noCalendar||e.isMobile||(U(),qe(),te())}function ht(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Jt(a){a.preventDefault(),a.stopPropagation();var c=function(F){return F.classList&&F.classList.contains("flatpickr-day")&&!F.classList.contains("flatpickr-disabled")&&!F.classList.contains("notAllowed")},f=Un(oe(a),c);if(f!==void 0){var v=f,w=e.latestSelectedDateObj=new Date(v.dateObj.getTime()),_=(w.getMonth()<e.currentMonth||w.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=v,e.config.mode==="single")e.selectedDates=[w];else if(e.config.mode==="multiple"){var L=mt(w);L?e.selectedDates.splice(parseInt(L),1):e.selectedDates.push(w)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=w,e.selectedDates.push(w),le(w,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(F,H){return F.getTime()-H.getTime()}));if(p(),_){var I=e.currentYear!==w.getFullYear();e.currentYear=w.getFullYear(),e.currentMonth=w.getMonth(),I&&(V("onYearChange"),U()),V("onMonthChange")}if(qe(),te(),ge(),!_&&e.config.mode!=="range"&&e.config.showMonths===1?O(v):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var P=e.config.mode==="single"&&!e.config.enableTime,x=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(P||x)&&ht()}k()}}var Be={locale:[Qt,zt],showMonths:[Ae,l,qt],minDate:[y],maxDate:[y],positionElement:[en],clickOpens:[function(){e.config.clickOpens===!0?(b(e._input,"focus",e.open),b(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function mi(a,c){if(a!==null&&typeof a=="object"){Object.assign(e.config,a);for(var f in a)Be[f]!==void 0&&Be[f].forEach(function(v){return v()})}else e.config[a]=c,Be[a]!==void 0?Be[a].forEach(function(v){return v()}):St.indexOf(a)>-1&&(e.config[a]=xt(c));e.redraw(),ge(!0)}function Xt(a,c){var f=[];if(a instanceof Array)f=a.map(function(v){return e.parseDate(v,c)});else if(a instanceof Date||typeof a=="number")f=[e.parseDate(a,c)];else if(typeof a=="string")switch(e.config.mode){case"single":case"time":f=[e.parseDate(a,c)];break;case"multiple":f=a.split(e.config.conjunction).map(function(v){return e.parseDate(v,c)});break;case"range":f=a.split(e.l10n.rangeSeparator).map(function(v){return e.parseDate(v,c)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(a)));e.selectedDates=e.config.allowInvalidPreload?f:f.filter(function(v){return v instanceof Date&&ye(v,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(v,w){return v.getTime()-w.getTime()})}function vi(a,c,f){if(c===void 0&&(c=!1),f===void 0&&(f=e.config.dateFormat),a!==0&&!a||a instanceof Array&&a.length===0)return e.clear(c);Xt(a,f),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),y(void 0,c),m(),e.selectedDates.length===0&&e.clear(!1),ge(c),c&&V("onChange")}function Zt(a){return a.slice().map(function(c){return typeof c=="string"||typeof c=="number"||c instanceof Date?e.parseDate(c,void 0,!0):c&&typeof c=="object"&&c.from&&c.to?{from:e.parseDate(c.from,void 0),to:e.parseDate(c.to,void 0)}:c}).filter(function(c){return c})}function yi(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var a=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);a&&Xt(a,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function bi(){if(e.input=Ut(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=$(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),en()}function en(){e._positionElement=e.config.positionElement||e._input}function wi(){var a=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=$("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=a,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=a==="datetime-local"?"Y-m-d\\TH:i:S":a==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}b(e.mobileInput,"change",function(c){e.setDate(oe(c).value,!1,e.mobileFormatStr),V("onChange"),V("onClose")})}function Ci(a){if(e.isOpen===!0)return e.close();e.open(a)}function V(a,c){if(e.config!==void 0){var f=e.config[a];if(f!==void 0&&f.length>0)for(var v=0;f[v]&&v<f.length;v++)f[v](e.selectedDates,e.input.value,e,c);a==="onChange"&&(e.input.dispatchEvent(gt("change")),e.input.dispatchEvent(gt("input")))}}function gt(a){var c=document.createEvent("Event");return c.initEvent(a,!0,!0),c}function mt(a){for(var c=0;c<e.selectedDates.length;c++){var f=e.selectedDates[c];if(f instanceof Date&&le(f,a)===0)return""+c}return!1}function Oi(a){return e.config.mode!=="range"||e.selectedDates.length<2?!1:le(a,e.selectedDates[0])>=0&&le(a,e.selectedDates[1])<=0}function qe(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(a,c){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+c),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[c].textContent=ot(f.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=f.getMonth().toString(),a.value=f.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function vt(a){var c=a||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(f){return e.formatDate(f,c)}).filter(function(f,v,w){return e.config.mode!=="range"||e.config.enableTime||w.indexOf(f)===v}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function ge(a){a===void 0&&(a=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=vt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=vt(e.config.altFormat)),a!==!1&&V("onValueUpdate")}function _i(a){var c=oe(a),f=e.prevMonthNav.contains(c),v=e.nextMonthNav.contains(c);f||v?ft(f?-1:1):e.yearElements.indexOf(c)>=0?c.select():c.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):c.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Di(a){a.preventDefault();var c=a.type==="keydown",f=oe(a),v=f;e.amPM!==void 0&&f===e.amPM&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]);var w=parseFloat(v.getAttribute("min")),_=parseFloat(v.getAttribute("max")),L=parseFloat(v.getAttribute("step")),I=parseInt(v.value,10),P=a.delta||(c?a.which===38?1:-1:0),x=I+L*P;if(typeof v.value<"u"&&v.value.length===2){var F=v===e.hourElement,H=v===e.minuteElement;x<w?(x=_+x+ce(!F)+(ce(F)&&ce(!e.amPM)),H&&N(void 0,-1,e.hourElement)):x>_&&(x=v===e.hourElement?x-_-ce(!e.amPM):w,H&&N(void 0,1,e.hourElement)),e.amPM&&F&&(L===1?x+I===23:Math.abs(x-I)>L)&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]),v.value=ne(x)}}return r(),e}function Me(n,t){for(var e=Array.prototype.slice.call(n).filter(function(s){return s instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var o=e[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Ks(o,t||{}),i.push(o._flatpickr)}catch(s){console.error(s)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Me(this,n)},HTMLElement.prototype.flatpickr=function(n){return Me([this],n)});var z=function(n,t){return typeof n=="string"?Me(window.document.querySelectorAll(n),t):n instanceof Node?Me([n],t):Me(n,t)};z.defaultConfig={};z.l10ns={en:Q({},Ne),default:Q({},Ne)};z.localize=function(n){z.l10ns.default=Q(Q({},z.l10ns.default),n)};z.setDefaults=function(n){z.defaultConfig=Q(Q({},z.defaultConfig),n)};z.parseDate=Rt({});z.formatDate=Qn({});z.compareDates=le;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Me(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=z);function Mt(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class Ws{constructor(){this._events={}}on(t,e){Mt(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}Mt(t,r=>{if(i===1){delete this._events[r];return}const o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;Mt(t,r=>{const o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}}function Us(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const ut=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":Gs(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Gn=n=>{if(!Qs(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},Jn=n=>{let t=Array.from(n);return ut(t)},Qs=n=>new Set(n).size!==n.length,He=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Gs=n=>n.reduce((t,e)=>Math.max(t,Js(e)),0),Js=n=>Array.from(n).length,Xn=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return Xn(e).forEach(function(r){let o=r.slice(0);o[0]=n.charAt(0)+o[0],t.push(o),o=r.slice(0),o.unshift(n.charAt(0)),t.push(o)}),t},Xs=[[0,65535]],Zs="[̀-ͯ·ʾʼ]";let at,Zn;const eo=3,Bt={},On={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in On){let t=On[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Bt[i]=n}}const to=new RegExp(Object.keys(Bt).join("|")+"|"+Zs,"gu"),no=n=>{at===void 0&&(at=oo(Xs))},_n=(n,t="NFKD")=>n.normalize(t),lt=n=>Array.from(n).reduce((t,e)=>t+io(e),""),io=n=>(n=_n(n).toLowerCase().replace(to,t=>Bt[t]||""),_n(n,"NFC"));function*ro(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=lt(r);o!=r.toLowerCase()&&(o.length>eo||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}const so=n=>{const t={},e=(i,r)=>{const o=t[i]||new Set,s=new RegExp("^"+Jn(o)+"$","iu");r.match(s)||(o.add(He(r)),t[i]=o)};for(let i of ro(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},oo=n=>{const t=so(n),e={};let i=[];for(let o in t){let s=t[o];s&&(e[o]=Jn(s)),o.length>1&&i.push(He(o))}i.sort((o,s)=>s.length-o.length);const r=ut(i);return Zn=new RegExp("^"+r,"u"),e},ao=(n,t=1)=>{let e=0;return n=n.map(i=>(at[i]&&(e+=i.length),at[i]||i)),e>=t?Gn(n):""},lo=(n,t=1)=>(t=Math.max(t,n.length-1),ut(Xn(n).map(e=>ao(e,t)))),Dn=(n,t=!0)=>{let e=n.length>1?1:0;return ut(n.map(i=>{let r=[];const o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(lo(i.substrs[s]||"",e));return Gn(r)}))},co=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=s=>{for(const l of i){if(l.start===s.start&&l.substr===s.substr)return!1;if(!(s.length==1||l.length==1)&&(s.start<l.start&&s.end>l.start||l.start<s.start&&l.end>s.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class ct{constructor(){be(this,"parts");be(this,"substrs");be(this,"start");be(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new ct,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(const d of r)i.add(d);let s=e.substr.substring(0,t-o.start),l=s.length;return i.add({start:o.start,end:o.start+l,length:l,substr:s}),i}}const uo=n=>{no(),n=lt(n);let t="",e=[new ct];for(let i=0;i<n.length;i++){let o=n.substring(i).match(Zn);const s=n.substring(i,i+1),l=o?o[0]:null;let d=[],u=new Set;for(const h of e){const p=h.last();if(!p||p.length==1||p.end<=i)if(l){const m=l.length;h.add({start:i,end:i+m,length:m,substr:l}),u.add("1")}else h.add({start:i,end:i+1,length:1,substr:s}),u.add("2");else if(l){let m=h.clone(i,p);const A=l.length;m.add({start:i,end:i+A,length:A,substr:l}),d.push(m)}else u.add("3")}if(d.length>0){d=d.sort((h,p)=>h.length()-p.length());for(let h of d)co(h,e)||e.push(h);continue}if(i>0&&u.size==1&&!u.has("3")){t+=Dn(e,!1);let h=new ct;const p=e[0];p&&h.add(p.last()),e=[h]}}return t+=Dn(e,!0),t},fo=(n,t)=>{if(n)return n[t]},po=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},Ft=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},Lt=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Je=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ho=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=lt(n+"").toLowerCase(),t=lt(t+"").toLowerCase(),n>t?1:t>n?-1:0);class go{constructor(t,e){be(this,"items");be(this,"settings");this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(He).join("|")+"):(.*)$")),o.forEach(l=>{let d,u=null,h=null;s&&(d=l.match(s))&&(u=d[1],l=d[2]),l.length>0&&(this.settings.diacritics?h=uo(l)||null:h=He(l),h&&e&&(h="\\b"+h)),r.push({string:l,regex:h?new RegExp(h,"iu"):null,field:u})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,o=t.weights,s=r.length,l=t.getAttrFn;if(!s)return function(){return 1};const d=(function(){return s===1?function(u,h){const p=r[0].field;return Ft(l(h,p),u,o[p]||1)}:function(u,h){var p=0;if(u.field){const m=l(h,u.field);!u.regex&&m?p+=1/s:p+=Ft(m,u,1)}else Je(o,(m,A)=>{p+=Ft(l(h,A),u,m)});return p/s}})();return i===1?function(u){return d(e[0],u)}:t.options.conjunction==="and"?function(u){var h,p=0;for(let m of e){if(h=d(m,u),h<=0)return 0;p+=h}return p/i}:function(u){var h=0;return Je(e,p=>{h+=d(p,u)}),h/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);const l=function(u,h){return u==="$score"?h.score:t.getAttrFn(r.items[h.id],u)};if(s)for(let u of s)(t.query||u.field!=="$score")&&i.push(u);if(t.query){e=!0;for(let u of i)if(u.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(u=>u.field!=="$score");return i.length?function(u,h){var p,m;for(let A of i)if(m=A.field,p=(A.direction==="desc"?-1:1)*ho(l(m,u),l(m,h)),p)return p;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(Lt(r,"sort"),Lt(r,"sort_empty"),r.fields){Lt(r,"fields");const o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?po:fo}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;const s=e.score||i._getScoreFunction(o);t.length?Je(i.items,(d,u)=>{r=s(d),(e.filter===!1||r>0)&&o.items.push({score:r,id:u})}):Je(i.items,(d,u)=>{o.items.push({score:1,id:u})});const l=i._getSortFunction(o);return l&&o.items.sort(l),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}}const ue=n=>typeof n>"u"||n===null?null:nt(n),nt=n=>typeof n=="boolean"?n?"1":"0":n+"",Tt=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),mo=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),vo=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},An=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},yo=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),Y=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},X=(n,t,e,i)=>{n.addEventListener(t,e,i)},Oe=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},Pt=(n,t)=>{const e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},Sn=n=>n.replace(/[\\"']/g,"\\$&"),_e=(n,t)=>{t&&n.append(t)},W=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},he=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ei(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ei=n=>typeof n=="string"&&n.indexOf("<")>-1,bo=n=>n.replace(/['"\\]/g,"\\$&"),$t=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Xe=(n,t)=>{Object.assign(n.style,t)},ae=(n,...t)=>{var e=ti(t);n=ni(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ve=(n,...t)=>{var e=ti(t);n=ni(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},ti=n=>{var t=[];return W(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ni=n=>(Array.isArray(n)||(n=[n]),n),Nt=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},xn=(n,t=0)=>t>0?n[n.length-1]:n[0],wo=n=>Object.keys(n).length===0,En=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},R=(n,t)=>{W(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Vt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},Co=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var l=document.createElement("span");l.className="highlight";var d=o.splitText(s.index);d.splitText(s[0].length);var u=d.cloneNode(!0);return l.appendChild(u),Vt(d,l),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},Oo=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},_o=65,Do=13,Ao=27,So=37,xo=38,Eo=39,Io=40,In=8,ko=46,kn=9,Mo=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Ze=Mo?"metaKey":"ctrlKey",Mn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function Fn(n,t){var e=Object.assign({},Mn,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,l=e.optgroupField,d=e.optgroupLabelField,u=e.optgroupValueField,h=n.tagName.toLowerCase(),p=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!p&&!e.allowEmptyOption){let b=n.querySelector('option[value=""]');b&&(p=b.textContent)}var m={placeholder:p,options:[],optgroups:[],items:[],maxItems:null},A=()=>{var b,k=m.options,S={},y=1;let M=0;var N=O=>{var D=Object.assign({},O.dataset),C=i&&D[i];return typeof C=="string"&&C.length&&(D=Object.assign(D,JSON.parse(C))),D},ie=(O,D)=>{var C=ue(O.value);if(C!=null&&!(!C&&!e.allowEmptyOption)){if(S.hasOwnProperty(C)){if(D){var T=S[C][l];T?Array.isArray(T)?T.push(D):S[C][l]=[T,D]:S[C][l]=D}}else{var E=N(O);E[r]=E[r]||O.textContent,E[o]=E[o]||C,E[s]=E[s]||O.disabled,E[l]=E[l]||D,E.$option=O,E.$order=E.$order||++M,S[C]=E,k.push(E)}O.selected&&m.items.push(C)}},B=O=>{var D,C;C=N(O),C[d]=C[d]||O.getAttribute("label")||"",C[u]=C[u]||y++,C[s]=C[s]||O.disabled,C.$order=C.$order||++M,m.optgroups.push(C),D=C[u],W(O.children,T=>{ie(T,D)})};m.maxItems=n.hasAttribute("multiple")?null:1,W(n.children,O=>{b=O.tagName.toLowerCase(),b==="optgroup"?B(O):b==="option"&&ie(O)})},g=()=>{const b=n.getAttribute(i);if(b)m.options=JSON.parse(b),W(m.options,S=>{m.items.push(S[o])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const S=k.split(e.delimiter);W(S,y=>{const M={};M[r]=y,M[o]=y,m.options.push(M)}),m.items=S}};return h==="select"?A():g(),Object.assign({},Mn,m,t)}var Ln=0;class ee extends Us(Ws){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,Ln++;var i,r=he(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");const s=Fn(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=Pt(r,"tomselect-"+Ln),this.isRequired=r.required,this.sifter=new go(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var l=s.createFilter;typeof l!="function"&&(typeof l=="string"&&(l=new RegExp(l)),l instanceof RegExp?s.createFilter=k=>l.test(k):s.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();const d=he("<div>"),u=he("<div>"),h=this._render("dropdown"),p=he('<div role="listbox" tabindex="-1">'),m=this.input.getAttribute("class")||"",A=s.mode;var g;if(ae(d,s.wrapperClass,m,A),ae(u,s.controlClass),_e(d,u),ae(h,s.dropdownClass,A),s.copyClassesToDropdown&&ae(h,m),ae(p,s.dropdownContentClass),_e(h,p),he(s.dropdownParent||d).appendChild(h),ei(s.controlInput)){g=he(s.controlInput);var b=["autocorrect","autocapitalize","autocomplete","spellcheck"];W(b,k=>{r.getAttribute(k)&&R(g,{[k]:r.getAttribute(k)})}),g.tabIndex=-1,u.appendChild(g),this.focus_node=g}else s.controlInput?(g=he(s.controlInput),this.focus_node=g):(g=he("<input/>"),this.focus_node=u);this.wrapper=d,this.dropdown=h,this.dropdown_content=p,this.control=u,this.control_input=g,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,l=t.control,d=t.input,u=t.focus_node,h={passive:!0},p=t.inputId+"-ts-dropdown";R(o,{id:p}),R(u,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":p});const m=Pt(u,t.inputId+"-ts-control"),A="label[for='"+bo(t.inputId)+"']",g=document.querySelector(A),b=t.focus.bind(t);if(g){X(g,"click",b),R(g,{for:m});const y=Pt(g,t.inputId+"-ts-label");R(u,{"aria-labelledby":y}),R(o,{"aria-labelledby":y})}if(s.style.width=d.style.width,t.plugins.names.length){const y="plugin-"+t.plugins.names.join(" plugin-");ae([s,r],y)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&R(d,{multiple:"multiple"}),e.placeholder&&R(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+He(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=vo(e.load,e.loadThrottle)),X(r,"mousemove",()=>{t.ignoreHover=!1}),X(r,"mouseenter",y=>{var M=Nt(y.target,"[data-selectable]",r);M&&t.onOptionHover(y,M)},{capture:!0}),X(r,"click",y=>{const M=Nt(y.target,"[data-selectable]");M&&(t.onOptionSelect(y,M),Y(y,!0))}),X(l,"click",y=>{var M=Nt(y.target,"[data-ts-item]",l);if(M&&t.onItemSelect(y,M)){Y(y,!0);return}i.value==""&&(t.onClick(),Y(y,!0))}),X(u,"keydown",y=>t.onKeyDown(y)),X(i,"keypress",y=>t.onKeyPress(y)),X(i,"input",y=>t.onInput(y)),X(u,"blur",y=>t.onBlur(y)),X(u,"focus",y=>t.onFocus(y)),X(i,"paste",y=>t.onPaste(y));const k=y=>{const M=y.composedPath()[0];if(!s.contains(M)&&!r.contains(M)){t.isFocused&&t.blur(),t.inputState();return}M==i&&t.isOpen?y.stopPropagation():Y(y,!0)},S=()=>{t.isOpen&&t.positionDropdown()};X(document,"mousedown",k),X(window,"scroll",S,h),X(window,"resize",S,h),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",S),window.removeEventListener("resize",S),g&&g.removeEventListener("click",b)},this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,d.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,X(d,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,d.disabled?t.disable():d.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),ae(d,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),W(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?Fn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){$t(this.input,"input"),$t(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){Y(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);W(r,o=>{ue(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){Y(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),Y(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==kn&&Y(t);return}switch(t.keyCode){case _o:if(Oe(Ze,t)&&e.control_input.value==""){Y(t),e.selectAll();return}break;case Ao:e.isOpen&&(Y(t,!0),e.close()),e.clearActiveItems();return;case Io:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}Y(t);return;case xo:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}Y(t);return;case Do:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),Y(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&Y(t);return;case So:e.advanceSelection(-1,t);return;case Eo:e.advanceSelection(1,t);return;case kn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),Y(t)),e.settings.create&&e.createItem()&&Y(t));return;case In:case ko:e.deleteSelection(t);return}e.isInputHidden&&!Oe(Ze,t)&&Y(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=mo(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),Y(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(Y(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;ae(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||ve(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,$t(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];An(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,l,d,u;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&Oe("shiftKey",e)&&i.activeItems.length){for(u=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,u),l=Array.prototype.indexOf.call(i.control.children,t),s>l&&(d=s,s=l,l=d),o=s;o<=l;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);Y(e)}else r==="click"&&Oe(Ze,e)||r==="keydown"&&Oe("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&ve(i,"last-active"),ae(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ve(t,"active")}clearActiveItems(){ve(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,R(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),R(t,{"aria-selected":"true"}),ae(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,l=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;l+s>r+o?this.scroll(l-r+s,e):l<o&&this.scroll(l,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(ve(this.activeOption,"active"),R(this.activeOption,{"aria-selected":null})),this.activeOption=null,R(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,W(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(R(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&R(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let l=ue(s.id);return!(l&&r.items.indexOf(l)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,l,d,u,h,p;const m={},A=[];var g=this,b=g.inputValue();const k=b===g.lastQuery||b==""&&g.lastQuery==null;var S=g.search(b),y=null,M=g.settings.shouldOpen||!1,N=g.dropdown_content;k&&(y=g.activeOption,y&&(h=y.closest("[data-group]"))),o=S.items.length,typeof g.settings.maxOptions=="number"&&(o=Math.min(o,g.settings.maxOptions)),o>0&&(M=!0);const ie=(O,D)=>{let C=m[O];if(C!==void 0){let E=A[C];if(E!==void 0)return[C,E.fragment]}let T=document.createDocumentFragment();return C=A.length,A.push({fragment:T,order:D,optgroup:O}),[C,T]};for(e=0;e<o;e++){let O=S.items[e];if(!O)continue;let D=O.id,C=g.options[D];if(C===void 0)continue;let T=nt(D),E=g.getOption(T,!0);for(g.settings.hideSelected||E.classList.toggle("selected",g.items.includes(T)),s=C[g.settings.optgroupField]||"",l=Array.isArray(s)?s:[s],i=0,r=l&&l.length;i<r;i++){s=l[i];let te=C.$order,U=g.optgroups[s];U===void 0?s="":te=U.$order;const[Fe,Ae]=ie(s,te);i>0&&(E=E.cloneNode(!0),R(E,{id:C.$id+"-clone-"+i,"aria-selected":null}),E.classList.add("ts-cloned"),ve(E,"active"),g.activeOption&&g.activeOption.dataset.value==D&&h&&h.dataset.group===s.toString()&&(y=E)),Ae.appendChild(E),s!=""&&(m[s]=Fe)}}g.settings.lockOptgroupOrder&&A.sort((O,D)=>O.order-D.order),d=document.createDocumentFragment(),W(A,O=>{let D=O.fragment,C=O.optgroup;if(!D||!D.children.length)return;let T=g.optgroups[C];if(T!==void 0){let E=document.createDocumentFragment(),te=g.render("optgroup_header",T);_e(E,te),_e(E,D);let U=g.render("optgroup",{group:T,options:E});_e(d,U)}else _e(d,D)}),N.innerHTML="",_e(N,d),g.settings.highlight&&(Oo(N),S.query.length&&S.tokens.length&&W(S.tokens,O=>{Co(N,O.regex)}));var B=O=>{let D=g.render(O,{input:b});return D&&(M=!0,N.insertBefore(D,N.firstChild)),D};if(g.loading?B("loading"):g.settings.shouldLoad.call(g,b)?S.items.length===0&&B("no_results"):B("not_loading"),u=g.canCreate(b),u&&(p=B("option_create")),g.hasOptions=S.items.length>0||u,M){if(S.items.length>0){if(!y&&g.settings.mode==="single"&&g.items[0]!=null&&(y=g.getOption(g.items[0])),!N.contains(y)){let O=0;p&&!g.settings.addPrecedence&&(O=1),y=g.selectable()[O]}}else p&&(y=p);t&&!g.isOpen&&(g.open(),g.scrollToOption(y,"auto")),g.setActiveOption(y)}else g.clearActiveOption(),t&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=ue(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){W(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=ue(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,o;const s=ue(t),l=ue(e[i.settings.valueField]);if(s===null)return;const d=i.options[s];if(d==null)return;if(typeof l!="string")throw new Error("Value must be set in option data");const u=i.getOption(s),h=i.getItem(s);if(e.$order=e.$order||d.$order,delete i.options[s],i.uncacheValue(l),i.options[l]=e,u){if(i.dropdown_content.contains(u)){const p=i._render("option",e);Vt(u,p),i.activeOption===u&&i.setActiveOption(p)}u.remove()}h&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,l),r=i._render("item",e),h.classList.contains("active")&&ae(r,"active"),Vt(h,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=nt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};W(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=ue(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=ue(t);return e!==null?this.control.querySelector(`[data-value="${Sn(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);const o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];An(this,i,()=>{var r,o;const s=this,l=s.settings.mode,d=ue(t);if(!(d&&s.items.indexOf(d)!==-1&&(l==="single"&&s.close(),l==="single"||!s.settings.duplicates))&&!(d===null||!s.options.hasOwnProperty(d))&&(l==="single"&&s.clear(e),!(l==="multi"&&s.isFull()))){if(r=s._render("item",s.options[d]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,d),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let u=s.getOption(d),h=s.getAdjacent(u,1);h&&s.setActiveOption(h)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&l!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",d,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,o;const s=t.dataset.value;r=En(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),ve(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,l=d=>{if(i.unlock(),!d||typeof d!="object")return e();var u=ue(d[i.settings.valueField]);if(typeof u!="string")return e();i.setTextboxValue(),i.addOption(d,!0),i.setCaret(r),i.addItem(u),e(d),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,l):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||l(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",wo(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let d=function(u,h,p){return u||(u=he('<option value="'+Tt(h)+'">'+Tt(p)+"</option>")),u!=o&&e.input.append(u),s.push(u),(u!=o||l>0)&&(u.selected=!0),u};const s=[],l=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(u=>{u.selected=!1}),e.items.length==0&&e.settings.mode=="single"?d(o,"",""):e.items.forEach(u=>{if(i=e.options[u],r=i[e.settings.labelField]||"",s.includes(i.$option)){const h=e.input.querySelector(`option[value="${Sn(u)}"]:not(:checked)`);d(h,u,r)}else i.$option=d(i.$option,u,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,R(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Xe(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Xe(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,R(e.focus_node,{"aria-expanded":"false"}),Xe(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Xe(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();W(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===In?-1:1,i=yo(s.control_input);const l=[];if(s.activeItems.length)o=xn(s.activeItems,e),r=En(o),e>0&&r++,W(s.activeItems,d=>l.push(d));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){const d=s.controlChildren();let u;e<0&&i.start===0&&i.length===0?u=d[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(u=d[s.caretPos]),u!==void 0&&l.push(u)}if(!s.shouldDelete(l,t))return!1;for(Y(t,!0),typeof r<"u"&&s.setCaret(r);l.length;)s.removeItem(l.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(Oe(Ze,e)||Oe("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return xn(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ve(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,Tt),!r))return null;if(r=he(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?R(r,{"aria-disabled":"true"}):R(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],R(r,{"data-group":i}),e.group[o.settings.disabledField]&&R(r,{"data-disabled":""})),t==="option"||t==="item"){const s=nt(e[o.settings.valueField]);R(r,{"data-value":s}),t==="item"?(ae(r,o.settings.itemClass),R(r,{"data-ts-item":""})):(ae(r,o.settings.optionClass),R(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){W(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,l;return t==="after"&&(s=o.apply(r,arguments)),l=i.apply(r,arguments),t==="instead"?l:(t==="before"&&(s=o.apply(r,arguments)),s)}}}const Fo=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Lo(){Fo(this.input,"change",()=>{this.sync()})}const To=n=>typeof n>"u"||n===null?null:Po(n),Po=n=>typeof n=="boolean"?n?"1":"0":n+"",Tn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},$o=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(No(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},No=n=>typeof n=="string"&&n.indexOf("<")>-1;function Ho(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(l,d){d?(l.checked=!0,i.uncheckedClassNames&&l.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&l.classList.add(...i.checkedClassNames)):(l.checked=!1,i.checkedClassNames&&l.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&l.classList.add(...i.uncheckedClassNames))},o=function(l){setTimeout(()=>{var d=l.querySelector("input."+i.className);d instanceof HTMLInputElement&&r(d,l.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(l,d)=>{var u=$o(s.call(t,l,d)),h=document.createElement("input");i.className&&h.classList.add(i.className),h.addEventListener("click",function(m){Tn(m)}),h.type="checkbox";const p=To(l[t.settings.valueField]);return r(h,!!(p&&t.items.indexOf(p)>-1)),u.prepend(h),u}}),t.on("item_remove",s=>{var l=t.getOption(s);l&&(l.classList.remove("selected"),o(l))}),t.on("item_add",s=>{var l=t.getOption(s);l&&o(l)}),t.hook("instead","onOptionSelect",(s,l)=>{if(l.classList.contains("selected")){l.classList.remove("selected"),t.removeItem(l.dataset.value),t.refreshOptions(),Tn(s,!0);return}e.call(t,s,l),o(l)})}const jo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ro(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ro=n=>typeof n=="string"&&n.indexOf("<")>-1;function Vo(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=jo(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const Yo=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ee=(n,t,e,i)=>{n.addEventListener(t,e,i)},Bo=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},qo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(zo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},zo=n=>typeof n=="string"&&n.indexOf("<")>-1,Ko=(n,t)=>{Bo(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Wo=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Uo=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Qo=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function Go(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,l)=>{const d=qo(o.call(n,s,l));Ko(d,{draggable:"true"});const u=b=>{i||Yo(b),b.stopPropagation()},h=b=>{r=d,setTimeout(()=>{d.classList.add("ts-dragging")},0)},p=b=>{b.preventDefault(),d.classList.add("ts-drag-over"),A(d,r)},m=()=>{d.classList.remove("ts-drag-over")},A=(b,k)=>{k!==void 0&&(Qo(k,d)?Wo(b,k):Uo(b,k))},g=()=>{var b;document.querySelectorAll(".ts-drag-over").forEach(S=>S.classList.remove("ts-drag-over")),(b=r)==null||b.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(S=>{if(S.dataset.value){let y=S.dataset.value;y&&k.push(y)}}),n.setValue(k)};return Ee(d,"mousedown",u),Ee(d,"dragstart",h),Ee(d,"dragenter",p),Ee(d,"dragover",p),Ee(d,"dragleave",m),Ee(d,"dragend",g),d}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const Jo=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Xo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Zo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Zo=n=>typeof n=="string"&&n.indexOf("<")>-1;function ea(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=Xo(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{Jo(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const ta=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},na=(n,...t)=>{var e=ia(t);n=ra(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},ia=n=>{var t=[];return ta(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ra=n=>(Array.isArray(n)||(n=[n]),n),sa=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function oa(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=sa(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),na(e,"last-active")}else n.setCaret(n.caretPos+t)})}const aa=27,la=9,ca=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},da=(n,t,e,i)=>{n.addEventListener(t,e,i)},ua=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Pn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(fa(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},fa=n=>typeof n=="string"&&n.indexOf("<")>-1,pa=(n,...t)=>{var e=ha(t);n=ga(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ha=n=>{var t=[];return ua(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ga=n=>(Array.isArray(n)||(n=[n]),n);function ma(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,pa(n.control_input,"dropdown-input");const t=Pn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=Pn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case aa:n.isOpen&&(ca(e,!0),n.close()),n.clearActiveItems();return;case la:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),da(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const et=(n,t,e,i)=>{n.addEventListener(t,e,i)};function va(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),et(e,"input",r),et(e,"keyup",r),et(e,"blur",r),et(e,"update",r)})}function ya(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function ba(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const $n=37,wa=39,Ca=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Oa=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function _a(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===$n||e.keyCode===wa))return t.call(n,e);n.ignoreHover=!0,s=Ca(n.activeOption,"[data-group]"),i=Oa(n.activeOption,"[data-selectable]"),s&&(e.keyCode===$n?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}const Da=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Nn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Hn=(n,t,e,i)=>{n.addEventListener(t,e,i)},jn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Aa(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Aa=n=>typeof n=="string"&&n.indexOf("<")>-1;function Sa(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Da(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var l=jn(r.call(e,o,s)),d=jn(i);return l.appendChild(d),Hn(d,"mousedown",u=>{Nn(u,!0)}),Hn(d,"click",u=>{e.isLocked||(Nn(u,!0),!e.isLocked&&e.shouldDelete([l],u)&&(e.removeItem(l),e.refreshOptions(!1),e.inputState()))}),l}})}}function xa(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const Ea=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ia=(n,...t)=>{var e=ka(t);n=Ma(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ka=n=>{var t=[];return Ea(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Ma=n=>(Array.isArray(n)||(n=[n]),n);function Fa(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,l,d=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var m=n.selectable(),A=Array.from(m).indexOf(n.activeOption);if(A>=m.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const u=p=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(p in r&&r[p]),h=(p,m)=>n.items.indexOf(m)>=0||d.indexOf(m)>=0;n.setNextUrl=(p,m)=>{r[p]=m},n.getUrl=p=>{if(p in r){const m=r[p];return r[p]=!1,m}return n.clearPagination(),n.settings.firstUrl.call(n,p)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",p=>p in r?u(p):t.call(n,p)),n.hook("instead","loadCallback",(p,m)=>{if(!s)n.clearOptions(h);else if(l){const A=p[0];A!==void 0&&(l.dataset.value=A[n.settings.valueField])}i.call(n,p,m),s=!1}),n.hook("after","refreshOptions",()=>{const p=n.lastValue;var m;u(p)?(m=n.render("loading_more",{query:p}),m&&(m.setAttribute("data-selectable",""),l=m)):p in r&&!o.querySelector(".no-results")&&(m=n.render("no_more_results",{query:p})),m&&(Ia(m,n.settings.optionClass),o.append(m))}),n.on("initialize",()=>{d=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}ee.define("change_listener",Lo);ee.define("checkbox_options",Ho);ee.define("clear_button",Vo);ee.define("drag_drop",Go);ee.define("dropdown_header",ea);ee.define("caret_position",oa);ee.define("dropdown_input",ma);ee.define("input_autogrow",va);ee.define("no_backspace_delete",ya);ee.define("no_active_items",ba);ee.define("optgroup_columns",_a);ee.define("remove_button",Sa);ee.define("restore_on_backspace",xa);ee.define("virtual_scroll",Fa);window.TomSelect=ee;function ii(){const n=document.getElementById("menu-toggle"),t=document.getElementById("mobile-menu");n&&t&&(n.replaceWith(n.cloneNode(!0)),document.getElementById("menu-toggle").addEventListener("click",()=>{t.classList.toggle("hidden")}));const e=document.getElementById("user-menu-button"),i=document.getElementById("profile-dropdown");if(e&&i){e.replaceWith(e.cloneNode(!0));const r=document.getElementById("user-menu-button");r.addEventListener("click",()=>{i.classList.toggle("hidden");const o=i.classList.contains("hidden")?"false":"true";r.setAttribute("aria-expanded",o)}),document.addEventListener("click",function(o){!r.contains(o.target)&&!i.contains(o.target)&&i.classList.add("hidden")})}}document.addEventListener("livewire:load",ii);document.addEventListener("livewire:navigated",ii);
